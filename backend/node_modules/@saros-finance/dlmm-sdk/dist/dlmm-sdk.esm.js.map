{"version":3,"file":"dlmm-sdk.esm.js","sources":["../types/config.ts","../types/services.ts","../constants/config.ts","../interface/liquidityBookAbstract.ts","../services/getProgram.ts","../utils/price.ts","../services/swap.ts","../utils/math.ts","../utils/index.ts","../services/core.ts"],"sourcesContent":["import { Commitment, ConnectionConfig, PublicKey } from \"@solana/web3.js\";\nimport { BN } from \"@coral-xyz/anchor\";\n\nexport enum MODE {\n  TESTNET = \"testnet\",\n  DEVNET = \"devnet\",\n  MAINNET = \"mainnet\",\n}\n\nexport type LiquidityBookConfig = {\n  baseFactor: number;\n  binStep: number;\n  activeId: number;\n  binArraySize: number;\n  binArrayIndex: number;\n  maxBasisPoints: number;\n  filterPeriod: number;\n  decayPeriod: number;\n  reductionFactor: number;\n  variableFeeControl: number;\n  maxVolatilityAccumulator: number;\n  protocolShare: number;\n  startTime: number;\n  rewardsDuration: number;\n  rewardsPerSecond: number;\n};\n\nexport interface ILiquidityBookConfig {\n  mode: MODE;\n  options?: {\n    rpcUrl: string;\n    commitmentOrConfig?: Commitment | ConnectionConfig\n  }\n}\n\nexport type Bin = {\n  reserveX: number;\n  reserveY: number;\n  totalSupply: number;\n};\nexport type BinArray = {\n  bins: Bin[];\n  index: number;\n};\n\nexport type StaticFeeParameters = {\n  baseFactor: number;\n  filterPeriod: number;\n  decayPeriod: number;\n  reductionFactor: number;\n  variableFeeControl: number;\n  maxVolatilityAccumulator: number;\n  protocolShare: number;\n  space: Uint8Array;\n};\n\nexport type DynamicFeeParameters = {\n  timeLastUpdated: bigint;\n  volatilityAccumulator: number;\n  volatilityReference: number;\n  idReference: number;\n  space: Uint8Array;\n};\n\nexport type PairInfo = {\n  bump: Uint8Array;\n  liquidityBookConfig: PublicKey;\n  binStep: number;\n  binStepSeed: Uint8Array;\n  tokenMintX: PublicKey;\n  tokenMintY: PublicKey;\n  staticFeeParameters: StaticFeeParameters;\n  activeId: number;\n  dynamicFeeParameters: DynamicFeeParameters;\n  protocolFeesX: BN;\n  protocolFeesY: BN;\n  hook: PublicKey | null;\n};\n\nexport interface PoolMetadata {\n  poolAddress: string;\n  baseMint: string;\n  baseReserve: string;\n  quoteMint: string;\n  quoteReserve: string;\n  tradeFee: number;\n  extra: {\n    hook?: string;\n    tokenQuoteDecimal: number;\n    tokenBaseDecimal: number;\n  };\n}\n","import { PublicKey, Transaction } from \"@solana/web3.js\";\nimport { BN } from \"@coral-xyz/anchor\";\n\nexport enum LiquidityShape {\n  Spot = \"Spot\",\n  Curve = \"Curve\",\n  BidAsk = \"BidAsk\",\n}\n\nexport enum RemoveLiquidityType {\n  Both = \"removeBoth\",\n  BaseToken = \"removeBaseToken\",\n  QuoteToken = \"removeQuoteToken\",\n}\n\nexport interface PositionInfo {\n  pair: string;\n  positionMint: string;\n  position: string;\n\n  liquidityShares: string[];\n  lowerBinId: number;\n  upperBinId: number;\n  space: number[];\n}\n\nexport interface GetBinArrayParams {\n  binArrayIndex: number;\n  pair: PublicKey;\n  payer?: PublicKey;\n  transaction?: Transaction;\n}\nexport interface SwapParams {\n  tokenMintX: PublicKey;\n  tokenMintY: PublicKey;\n  amount: bigint;\n  otherAmountOffset: bigint;\n  swapForY: boolean;\n  isExactInput: boolean;\n  pair: PublicKey;\n  hook: PublicKey;\n  payer: PublicKey;\n}\n\nexport interface GetTokenOutputParams {\n  pair: PublicKey;\n  tokenBase: PublicKey;\n  tokenQuote: PublicKey;\n  amount: bigint;\n  swapForY: boolean;\n  isExactInput: boolean;\n  tokenBaseDecimal: number;\n  tokenQuoteDecimal: number;\n  slippage: number;\n}\n\nexport interface GetTokenOutputResponse {\n  amountIn: bigint;\n  amountOut: bigint;\n  priceImpact: number;\n  amount: bigint;\n  otherAmountOffset: bigint;\n}\n\nexport interface Pair {\n  bump: number[];\n  liquidityBookConfig: string; // PublicKey as string\n  binStep: number;\n  binStepSeed: number[];\n  tokenMintX: string; // PublicKey as string\n  tokenMintY: string; // PublicKey as string\n  staticFeeParameters: {\n    baseFactor: number;\n    filterPeriod: number;\n    decayPeriod: number;\n    reductionFactor: number;\n    variableFeeControl: number;\n    maxVolatilityAccumulator: number;\n    protocolShare: number;\n    space: [number, number];\n  };\n  activeId: number;\n  dynamicFeeParameters: {\n    timeLastUpdated: BN; // hex string, likely timestamp\n    volatilityAccumulator: number;\n    volatilityReference: number;\n    idReference: number;\n    space: [number, number, number, number];\n  };\n  protocolFeesX: string; // likely bytes/hex\n  protocolFeesY: string; // likely bytes/hex\n  hook: null | string; // hook could be nullable\n}\n\ninterface Bin {\n  totalSupply: string;\n  reserveX: string;\n  reserveY: string;\n}\n\nexport interface CreatePairWithConfigParams {\n  tokenBase: {\n    decimal: number;\n    mintAddress: string;\n  };\n  tokenQuote: {\n    decimal: number;\n    mintAddress: string;\n  };\n  binStep: number;\n  ratePrice: number;\n  payer: PublicKey;\n}\n\nexport interface CreatePositionParams {\n  payer: PublicKey;\n  relativeBinIdLeft: number;\n  relativeBinIdRight: number;\n  pair: PublicKey;\n  binArrayIndex: number;\n  positionMint: PublicKey;\n  transaction: Transaction;\n}\n\nexport interface GetUserVaultInfoParams {\n  tokenAddress: PublicKey;\n  payer: PublicKey;\n  transaction?: Transaction;\n}\n\nexport interface Distribution {\n  relativeBinId: number;\n  distributionX: number;\n  distributionY: number;\n}\n\nexport interface AddLiquidityIntoPositionParams {\n  positionMint: PublicKey;\n  payer: PublicKey;\n  pair: PublicKey;\n  transaction: Transaction;\n  liquidityDistribution: Distribution[];\n  amountY: number;\n  amountX: number;\n  binArrayLower: PublicKey;\n  binArrayUpper: PublicKey;\n}\n\nexport interface AddLiquidityParams {\n  tokenX: {\n    address?: string;\n    decimals: number;\n    amount: number;\n    mintAddress: string;\n  };\n  tokenY: {\n    address?: string;\n    decimals: number;\n    amount: number;\n    mintAddress: string;\n  };\n\n  pair: string;\n  binRange: [number, number];\n  positions: PositionInfo[];\n  shape: LiquidityShape;\n  activeBin: number;\n  refId: number;\n  payer: PublicKey;\n}\n\nexport interface RemoveMultipleLiquidityParams {\n  maxPositionList: {\n    position: string;\n    start: number;\n    end: number;\n    positionMint: string;\n  }[];\n  payer: PublicKey;\n  type: \"removeBoth\" | \"removeBaseToken\" | \"removeQuoteToken\";\n  pair: PublicKey;\n  tokenMintX: PublicKey;\n  tokenMintY: PublicKey;\n  activeId: number;\n}\n\nexport interface RemoveMultipleLiquidityResponse {\n  txs: Transaction[];\n  txCreateAccount?: Transaction;\n  txCloseAccount?: Transaction;\n  positionClosed?: Record<string, string>[];\n}\n\nexport interface GetBinsArrayInfoParams {\n  binArrayIndex: number;\n  pair: PublicKey;\n  payer: PublicKey;\n}\n\nexport interface GetBinsReserveParams {\n  position: PublicKey;\n  pair: PublicKey;\n  payer: PublicKey;\n}\n\nexport interface GetBinsReserveResponse {\n  reserveX: string | number;\n  reserveY: string | number;\n  totalSupply: string | number;\n  liquidityShare: BN;\n  binId: number;\n  binPosistion: number;\n}\n\nexport interface ReserveParams {\n  binId: number;\n  reserveX: string | number;\n  reserveY: string | number;\n  liquidityShare: string | number;\n}\n\nexport interface UserPositionsParams {\n  payer: PublicKey;\n  pair: PublicKey;\n}\n","import { MODE } from \"../types\";\n\nexport const CONFIG = {\n  [MODE.TESTNET]: {\n    rpc: \"https://api.testnet.solana.com\",\n  },\n  [MODE.DEVNET]: {\n    rpc: \"https://api.devnet.solana.com\",\n  },\n  [MODE.MAINNET]: {\n    rpc: \"https://api.mainnet-beta.solana.com\",\n  },\n};\n\nexport const BASE_FACTOR = 8_000;\nexport const BIN_STEP = 1;\nexport const ACTIVE_ID = 8388608;\nexport const BIN_ARRAY_SIZE = 256;\nexport const BIN_ARRAY_INDEX = ACTIVE_ID / BIN_ARRAY_SIZE - 1;\nexport const MAX_BASIS_POINTS = 10_000;\nexport const FILTER_PERIOD = 30;\nexport const DECAY_PERIOD = 600;\nexport const REDUCTION_FACTOR = 5_000;\nexport const VARIABLE_FEE_CONTROL = 40_000;\nexport const MAX_VOLATILITY_ACCUMULATOR = 350_000;\nexport const PROTOCOL_SHARE = 2000;\nexport const START_TIME = 1000;\nexport const REWARDS_DURATION = 24 * 3600;\nexport const REWARDS_PER_SECOND = Math.floor(100e9 / REWARDS_DURATION);\nexport const VARIABLE_FEE_PRECISION = 100_000_000_000;\nexport const SCALE_OFFSET = 64;\nexport const BASIS_POINT_MAX = 10_000;\nexport const ONE = 1 << SCALE_OFFSET;\nexport const PRECISION = 1_000_000_000;\n\nexport const UNIT_PRICE_DEFAULT = 1_000_000;\nexport const CCU_LIMIT = 400_000;\nexport const WRAP_SOL_ADDRESS = \"So11111111111111111111111111111111111111112\";\nexport const FIXED_LENGTH = 16;\n\nexport const BIN_STEP_CONFIGS = [\n  {\n    binStep: 1,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 10,\n      decayPeriod: 120,\n      reductionFactor: 5000,\n      variableFeeControl: 2000000,\n      maxVolatilityAccumulator: 100000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 2,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 10,\n      decayPeriod: 120,\n      reductionFactor: 5000,\n      variableFeeControl: 500000,\n      maxVolatilityAccumulator: 250000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 5,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 30,\n      decayPeriod: 600,\n      reductionFactor: 5000,\n      variableFeeControl: 120000,\n      maxVolatilityAccumulator: 300000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 10,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 30,\n      decayPeriod: 600,\n      reductionFactor: 5000,\n      variableFeeControl: 40000,\n      maxVolatilityAccumulator: 350000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 20,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 30,\n      decayPeriod: 600,\n      reductionFactor: 5000,\n      variableFeeControl: 20000,\n      maxVolatilityAccumulator: 350000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 50,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 120,\n      decayPeriod: 1200,\n      reductionFactor: 5000,\n      variableFeeControl: 10000,\n      maxVolatilityAccumulator: 250000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 100,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 300,\n      decayPeriod: 1200,\n      reductionFactor: 5000,\n      variableFeeControl: 7500,\n      maxVolatilityAccumulator: 150000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 200,\n    feeParameters: {\n      baseFactor: 10000,\n      filterPeriod: 300,\n      decayPeriod: 1200,\n      reductionFactor: 5000,\n      variableFeeControl: 7500,\n      maxVolatilityAccumulator: 150000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n  {\n    binStep: 250,\n    feeParameters: {\n      baseFactor: 20000,\n      filterPeriod: 300,\n      decayPeriod: 1200,\n      reductionFactor: 5000,\n      variableFeeControl: 7500,\n      maxVolatilityAccumulator: 150000,\n      protocolShare: 2000,\n      space: [0, 0],\n    },\n  },\n];\n","import { Connection } from \"@solana/web3.js\";\nimport { AnchorProvider, Idl, Program, Wallet } from \"@coral-xyz/anchor\";\nimport { ILiquidityBookConfig, MODE } from \"../types\";\nimport { CONFIG } from \"../constants/config\";\nimport LiquidityBookIDL from \"../constants/idl/liquidity_book.json\";\nimport MdmaIDL from \"../constants/idl/rewarder_hook.json\";\nimport LiquidityBookIDLDevnet from \"../constants/idl_devnet/liquidity_book.json\";\nimport MdmaIDLDevnet from \"../constants/idl_devnet/rewarder_hook.json\";\n\nexport abstract class LiquidityBookAbstract {\n  connection: Connection;\n\n  lbProgram!: Program<Idl>;\n  hooksProgram!: Program<Idl>;\n  mode!: MODE\n\n  constructor(config: ILiquidityBookConfig) {\n    // Initialize the services heref\n    this.connection = new Connection(\n      config.options?.rpcUrl || CONFIG[config.mode].rpc,\n      config.options?.commitmentOrConfig || \"confirmed\"\n    );\n\n    const provider = new AnchorProvider(\n      this.connection,\n      {} as Wallet,\n      AnchorProvider.defaultOptions()\n    );\n    this.mode = config.mode\n\n    if (config.mode === MODE.DEVNET) {\n      this.lbProgram = new Program(LiquidityBookIDLDevnet as Idl, provider);\n      this.hooksProgram = new Program(MdmaIDLDevnet as Idl, provider);\n    } else {\n      this.lbProgram = new Program(LiquidityBookIDL as Idl, provider);\n      this.hooksProgram = new Program(MdmaIDL as Idl, provider);\n    }\n  }\n}\n","import { TOKEN_2022_PROGRAM_ID, TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\nimport { Connection, PublicKey } from \"@solana/web3.js\";\n\nexport const getProgram = async (\n  address: PublicKey,\n  connection: Connection\n) => {\n  const account = await connection.getParsedAccountInfo(address);\n\n  const owner = account.value?.owner.toBase58();\n\n  const program =\n    owner === TOKEN_PROGRAM_ID.toBase58()\n      ? TOKEN_PROGRAM_ID\n      : TOKEN_2022_PROGRAM_ID;\n\n  return program;\n};\n","import { BASIS_POINT_MAX, ONE, SCALE_OFFSET } from '../constants/config'\n\nconst getBase = (binStep: number) => {\n  const quotient = binStep << SCALE_OFFSET\n  if (quotient < 0) return null\n\n  const basisPointMaxBigInt = BASIS_POINT_MAX\n\n  //@ts-ignore\n  if (basisPointMaxBigInt === 0) return null\n  const fraction = quotient / basisPointMaxBigInt\n\n  const oneBigInt = ONE\n  const result = oneBigInt + fraction\n\n  return result\n}\n\nexport const getPriceFromId = (\n  bin_step: number,\n  bin_id: number,\n  baseTokenDecimal: number,\n  quoteTokenDecimal: number\n) => {\n  const base = getBase(bin_step) as number\n  const exponent = bin_id - 8_388_608\n  const decimalPow = Math.pow(10, baseTokenDecimal - quoteTokenDecimal)\n\n  return Math.pow(base, exponent) * decimalPow\n}\n\nexport const getIdFromPrice = (\n  price: number,\n  binStep: number,\n  baseTokenDecimal: number,\n  quoteTokenDecimal: number\n): number => {\n  if (price <= 0) throw new Error('Giá phải lớn hơn 0')\n  if (binStep <= 0 || binStep > BASIS_POINT_MAX)\n    throw new Error('Bin step invalid')\n\n  const decimalPow = Math.pow(10, quoteTokenDecimal - baseTokenDecimal)\n\n  const base = 1 + binStep / BASIS_POINT_MAX\n  const exponent = Math.log(price * decimalPow) / Math.log(base)\n  const binId = Math.round(exponent + 8_388_608)\n\n  return binId\n}\n","import { BN, Idl, Program, utils } from \"@coral-xyz/anchor\";\nimport { Bin, BinArray } from \"../types\";\n\nimport { Connection, PublicKey } from \"@solana/web3.js\";\nimport {\n  BASIS_POINT_MAX,\n  BIN_ARRAY_SIZE,\n  PRECISION,\n  SCALE_OFFSET,\n  VARIABLE_FEE_PRECISION,\n} from \"../constants/config\";\nimport { getPriceFromId } from \"../utils/price\";\nimport {\n  GetBinArrayParams,\n  GetTokenOutputParams,\n  Pair,\n} from \"../types/services\";\n\nclass LBError extends Error {\n  static BinNotFound = new LBError(\"Bin not found\");\n  static BinArrayIndexMismatch = new LBError(\"Bin array index mismatch\");\n\n  constructor(message: string) {\n    super(message);\n    this.name = \"LBError\";\n  }\n}\n\nclass BinArrayRange {\n  private readonly bins: { [binId: number]: Bin };\n  constructor(\n    binArrayPrevious: BinArray,\n    binArrayCurrent: BinArray,\n    binArrayNext: BinArray\n  ) {\n    if (\n      binArrayCurrent.index !== binArrayPrevious.index + 1 ||\n      binArrayNext.index !== binArrayCurrent.index + 1\n    ) {\n      throw LBError.BinArrayIndexMismatch;\n    }\n\n    this.bins = {};\n\n    const addBins = (binArray: BinArray) => {\n      binArray.bins.forEach((bin, index) => {\n        const binId = binArray.index * BIN_ARRAY_SIZE + index;\n        this.bins[binId] = bin;\n      });\n    };\n\n    addBins(binArrayPrevious);\n    addBins(binArrayCurrent);\n    addBins(binArrayNext);\n  }\n\n  getBinMut(binId: number) {\n    const bin = this.bins[binId];\n    return bin;\n  }\n\n  getAllBins() {\n    return Object.values(this.bins);\n  }\n}\n\nexport class LBSwapService {\n  lbProgram!: Program<Idl>;\n  volatilityAccumulator: number;\n  volatilityReference: number;\n  timeLastUpdated: number;\n  referenceId: number;\n  connection: Connection;\n\n  constructor(lbProgram: Program<Idl>, connection: Connection) {\n    this.lbProgram = lbProgram;\n    this.connection = connection;\n    this.volatilityAccumulator = 0;\n    this.volatilityReference = 0;\n    this.referenceId = 0;\n    this.timeLastUpdated = 0;\n  }\n\n  static fromLbConfig(lbProgram: Program<Idl>, connection: Connection) {\n    return new LBSwapService(lbProgram, connection);\n  }\n\n  getBinArray(params: GetBinArrayParams) {\n    const { binArrayIndex, pair } = params;\n\n    const binArray = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n        pair.toBuffer(),\n        new BN(binArrayIndex).toArrayLike(Buffer, \"le\", 4),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    return binArray;\n  }\n\n  public async calculateInOutAmount(params: GetTokenOutputParams) {\n    const { amount, swapForY, pair, isExactInput } = params;\n    try {\n       //@ts-ignore\n      const pairInfo: Pair = await this.lbProgram.account.pair.fetch(pair);\n      if (!pairInfo) throw new Error(\"Pair not found\");\n\n      const currentBinArrayIndex = Math.floor(\n        pairInfo.activeId / BIN_ARRAY_SIZE\n      );\n      const binArrayIndexes = [\n        currentBinArrayIndex - 1,\n        currentBinArrayIndex,\n        currentBinArrayIndex + 1,\n      ];\n      const binArrayAddresses = binArrayIndexes.map((idx) =>\n        this.getBinArray({\n          binArrayIndex: idx,\n          pair,\n        })\n      );\n\n      // Fetch bin arrays in batch, fallback to empty if not found\n      const binArrays: BinArray[] = await Promise.all(\n        binArrayAddresses.map((address, i) =>\n           //@ts-ignore\n          this.lbProgram.account.binArray.fetch(address).catch((error: any) => {\n            return { index: binArrayIndexes[i], bins: [] } as BinArray;\n          })\n        )\n      );\n\n      // Validate bin arrays and build range\n      const binRange = new BinArrayRange(\n        binArrays[0],\n        binArrays[1],\n        binArrays[2]\n      );\n      const totalSupply = binRange\n        .getAllBins()\n        .reduce((acc, cur) => acc.add(cur.totalSupply), new BN(0));\n      if (totalSupply.isZero()) {\n        return {\n          amountIn: BigInt(0),\n          amountOut: BigInt(0),\n        };\n      }\n\n      const amountAfterTransferFee = amount;\n\n      if (isExactInput) {\n        const amountOut = await this.calculateAmountOut(\n          amountAfterTransferFee,\n          binRange,\n          pairInfo,\n          swapForY\n        );\n\n        return {\n          amountIn: amount,\n          amountOut,\n        };\n      } else {\n        const amountIn = await this.calculateAmountIn(\n          amountAfterTransferFee,\n          binRange,\n          pairInfo,\n          swapForY\n        );\n\n        return {\n          amountIn,\n          amountOut: amountAfterTransferFee,\n        };\n      }\n    } catch (error) {\n      throw new Error(error as string);\n    }\n  }\n\n  /**\n   * @description Calculate the input amount for the swap. isExactInput = false\n   */\n  public async calculateAmountIn(\n    amount: bigint,\n    bins: BinArrayRange,\n    pairInfo: Pair,\n    swapForY: boolean\n  ) {\n    try {\n      let amountIn = BigInt(0);\n      let totalProtocolFee = BigInt(0);\n      let amountOutLeft = amount;\n      let activeId = pairInfo.activeId;\n      let totalBinUsed = 0;\n\n      await this.updateReferences(pairInfo, activeId);\n\n      while (amountOutLeft > BigInt(0)) {\n        totalBinUsed++;\n        this.updateVolatilityAccumulator(pairInfo, activeId);\n\n        const activeBin = bins.getBinMut(activeId);\n        if (!activeBin) {\n          break;\n        }\n\n        const fee = this.getTotalFee(pairInfo);\n\n        const {\n          amountInWithFees,\n          amountOut: amountOutOfBin,\n          protocolFeeAmount,\n        } = this.swapExactOutput({\n          binStep: pairInfo.binStep,\n          activeId,\n          amountOutLeft,\n          fee,\n          protocolShare: pairInfo.staticFeeParameters.protocolShare,\n          swapForY,\n          reserveX: activeBin.reserveX,\n          reserveY: activeBin.reserveY,\n        });\n\n        amountIn += amountInWithFees;\n        amountOutLeft -= amountOutOfBin;\n        totalProtocolFee += protocolFeeAmount;\n\n        if (!amountOutLeft) break;\n        activeId = this.moveActiveId(activeId, swapForY);\n      }\n\n      if (totalBinUsed >= 30) {\n        throw \"Swap crosses too many bins – quote aborted.\";\n      }\n\n      return amountIn;\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  /**\n   * @description Calculate the output amount for the swap. isExactInput = true\n   */\n  public async calculateAmountOut(\n    amount: bigint,\n    bins: BinArrayRange,\n    pairInfo: Pair,\n    swapForY: boolean\n  ) {\n    try {\n      let amountOut = BigInt(0);\n      let totalProtocolFee = BigInt(0);\n      let amountInLeft = amount;\n      let activeId = pairInfo.activeId;\n      let totalBinUsed = 0;\n\n      await this.updateReferences(pairInfo, activeId);\n\n      while (amountInLeft > BigInt(0)) {\n        totalBinUsed++;\n        this.updateVolatilityAccumulator(pairInfo, activeId);\n\n        const activeBin = bins.getBinMut(activeId);\n        if (!activeBin) {\n          break;\n        }\n\n        const fee = this.getTotalFee(pairInfo);\n\n        const {\n          amountInWithFees,\n          amountOut: amountOutOfBin,\n          protocolFeeAmount,\n        } = this.swapExactInput({\n          binStep: pairInfo.binStep,\n          activeId,\n          amountInLeft,\n          fee,\n          protocolShare: pairInfo.staticFeeParameters.protocolShare,\n          swapForY,\n          reserveX: activeBin.reserveX,\n          reserveY: activeBin.reserveY,\n        });\n\n        amountOut += amountOutOfBin;\n        amountInLeft -= amountInWithFees;\n        totalProtocolFee += protocolFeeAmount;\n\n        if (!amountInLeft) break;\n        activeId = this.moveActiveId(activeId, swapForY);\n      }\n      if (totalBinUsed >= 30) {\n        throw \"Swap crosses too many bins – quote aborted.\";\n      }\n\n      return amountOut;\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  public swapExactOutput(params: {\n    binStep: number;\n    activeId: number;\n    amountOutLeft: bigint;\n    fee: bigint;\n    protocolShare: number;\n    swapForY: boolean;\n    reserveX: BN;\n    reserveY: BN;\n  }) {\n    const {\n      binStep,\n      activeId,\n      amountOutLeft,\n      protocolShare,\n      swapForY,\n      reserveX,\n      reserveY,\n      fee,\n    } = params;\n    const protocolShareBigInt = BigInt(protocolShare);\n    const binReserveOut = swapForY ? reserveY : reserveX;\n\n    if (binReserveOut.isZero()) {\n      return {\n        amountInWithFees: BigInt(0),\n        amountOut: BigInt(0),\n        feeAmount: BigInt(0),\n        protocolFeeAmount: BigInt(0),\n      };\n    }\n\n    const binReserveOutBigInt = BigInt(binReserveOut.toString());\n    const amountOut =\n      amountOutLeft > binReserveOutBigInt ? binReserveOutBigInt : amountOutLeft;\n\n    /** @notice assume base token and quote token have the same decimals to get the price */\n    const price = getPriceFromId(binStep, activeId, 9, 9);\n    // Encode price as bigint with SCALE_OFFSET\n    const priceScaled = BigInt(\n      Math.round(Number(price) * Math.pow(2, SCALE_OFFSET))\n    );\n\n    const amountInWithoutFee = this.calcAmountInByPrice(\n      amountOut,\n      priceScaled,\n      SCALE_OFFSET,\n      swapForY,\n      \"up\"\n    );\n\n    const feeAmount = this.getFeeForAmount(amountInWithoutFee, fee);\n    const amountIn = amountInWithoutFee + feeAmount;\n    const protocolFeeAmount = this.getProtocolFee(\n      feeAmount,\n      protocolShareBigInt\n    );\n\n    return {\n      amountInWithFees: amountIn,\n      amountOut,\n      feeAmount,\n      protocolFeeAmount,\n    };\n  }\n\n  public swapExactInput(params: {\n    binStep: number;\n    activeId: number;\n    amountInLeft: bigint;\n    fee: bigint;\n    protocolShare: number;\n    swapForY: boolean;\n    reserveX: BN;\n    reserveY: BN;\n  }) {\n    const {\n      binStep,\n      activeId,\n      amountInLeft,\n      protocolShare,\n      swapForY,\n      reserveX,\n      reserveY,\n      fee,\n    } = params;\n    const protocolShareBigInt = BigInt(protocolShare);\n    const binReserveOut = swapForY ? reserveY : reserveX;\n\n    if (binReserveOut.isZero()) {\n      return {\n        amountInWithFees: BigInt(0),\n        amountOut: BigInt(0),\n        feeAmount: BigInt(0),\n        protocolFeeAmount: BigInt(0),\n      };\n    }\n\n    const binReserveOutBigInt = BigInt(binReserveOut.toString());\n\n    /** @notice assume base token and quote token have the same decimals to get the price */\n    const price = getPriceFromId(binStep, activeId, 9, 9);\n    // Encode price as bigint with SCALE_OFFSET\n    const priceScaled = BigInt(\n      Math.round(Number(price) * Math.pow(2, SCALE_OFFSET))\n    );\n\n    // Calculate maxAmountIn (input needed to take all output in bin, before fee)\n    let maxAmountIn = this.calcAmountInByPrice(\n      binReserveOutBigInt,\n      priceScaled,\n      SCALE_OFFSET,\n      swapForY,\n      \"up\"\n    );\n\n    // Add fee to get total input needed (ceil)\n    const maxFeeAmount = this.getFeeForAmount(maxAmountIn, fee);\n    maxAmountIn += maxFeeAmount;\n\n    let amountOut = BigInt(0);\n    let amountIn = BigInt(0);\n    let feeAmount = BigInt(0);\n\n    if (amountInLeft >= maxAmountIn) {\n      feeAmount = maxFeeAmount;\n      amountIn = maxAmountIn - feeAmount;\n      amountOut = binReserveOutBigInt;\n    } else {\n      feeAmount = this.getFeeAmount(amountInLeft, fee);\n      amountIn = amountInLeft - feeAmount;\n      amountOut = this.calcAmountOutByPrice(\n        amountIn,\n        priceScaled,\n        SCALE_OFFSET,\n        swapForY,\n        \"down\"\n      );\n      if (amountOut > binReserveOutBigInt) {\n        amountOut = binReserveOutBigInt;\n      }\n    }\n\n    const protocolFeeAmount =\n      protocolShare > BigInt(0)\n        ? this.getProtocolFee(feeAmount, protocolShareBigInt)\n        : BigInt(0);\n\n    return {\n      amountInWithFees: amountIn + feeAmount,\n      amountOut,\n      feeAmount,\n      protocolFeeAmount,\n    };\n  }\n\n  public async updateReferences(pairInfo: Pair, activeId: number) {\n    this.referenceId = pairInfo.dynamicFeeParameters.idReference;\n    this.timeLastUpdated =\n      pairInfo.dynamicFeeParameters.timeLastUpdated.toNumber();\n    this.volatilityReference =\n      pairInfo.dynamicFeeParameters.volatilityReference;\n\n    const slot = await this.connection.getSlot(); // Lấy slot hiện tại\n    const blockTimeStamp = await this.connection.getBlockTime(slot);\n\n    if (blockTimeStamp) {\n      const timeDelta = blockTimeStamp - this.timeLastUpdated;\n\n      if (timeDelta > pairInfo.staticFeeParameters.filterPeriod) {\n        this.referenceId = activeId;\n\n        if (timeDelta >= pairInfo.staticFeeParameters.decayPeriod) {\n          this.volatilityReference = 0;\n        } else {\n          return this.updateVolatilityReference(pairInfo);\n        }\n      }\n\n      this.timeLastUpdated = blockTimeStamp;\n    }\n\n    return this.updateVolatilityAccumulator(pairInfo, activeId);\n  }\n\n  public updateVolatilityReference(pairInfo: Pair) {\n    this.volatilityReference =\n      (pairInfo.dynamicFeeParameters.volatilityAccumulator *\n        pairInfo.staticFeeParameters.reductionFactor) /\n      10_000;\n  }\n\n  public updateVolatilityAccumulator(pairInfo: Pair, activeId: number) {\n    const deltaId = Math.abs(activeId - this.referenceId);\n    const volatilityAccumulator = deltaId * 10000 + this.volatilityReference;\n\n    const maxVolatilityAccumulator =\n      pairInfo.staticFeeParameters.maxVolatilityAccumulator;\n\n    if (volatilityAccumulator > maxVolatilityAccumulator) {\n      this.volatilityAccumulator = maxVolatilityAccumulator;\n    } else {\n      this.volatilityAccumulator = volatilityAccumulator;\n    }\n  }\n\n  public getVariableFee(pairInfo: Pair): bigint {\n    const variableFeeControl = BigInt(\n      pairInfo.staticFeeParameters.variableFeeControl\n    );\n    if (variableFeeControl > BigInt(0)) {\n      const prod = BigInt(\n        Math.floor(this.volatilityAccumulator * pairInfo.binStep)\n      );\n      const variableFee =\n        (prod * prod * variableFeeControl +\n          BigInt(VARIABLE_FEE_PRECISION) -\n          BigInt(1)) /\n        BigInt(VARIABLE_FEE_PRECISION);\n      return variableFee;\n    }\n    return variableFeeControl;\n  }\n\n  public getBaseFee(binStep: number, baseFactor: number): bigint {\n    return BigInt(binStep) * BigInt(baseFactor) * BigInt(10);\n  }\n\n  public getFeeForAmount(amount: bigint, fee: bigint) {\n    const denominator = BigInt(PRECISION) - fee;\n    const feeForAmount = (amount * fee + denominator - BigInt(1)) / denominator;\n\n    return feeForAmount;\n  }\n\n  public getFeeAmount(amount: bigint, fee: bigint) {\n    const feeAmount =\n      (amount * fee + BigInt(PRECISION) - BigInt(1)) / BigInt(PRECISION);\n\n    return feeAmount;\n  }\n\n  public getProtocolFee(fee: bigint, protocolShare: bigint) {\n    const protocolFee = (fee * protocolShare) / BigInt(BASIS_POINT_MAX);\n\n    return protocolFee;\n  }\n\n  public getTotalFee(pairInfo: Pair) {\n    return (\n      this.getBaseFee(\n        pairInfo.binStep,\n        pairInfo.staticFeeParameters.baseFactor\n      ) + this.getVariableFee(pairInfo)\n    );\n  }\n\n  public moveActiveId(pairId: number, swapForY: boolean) {\n    if (swapForY) {\n      return pairId - 1;\n    } else {\n      return pairId + 1;\n    }\n  }\n\n  /**\n   * Calculates the input amount required for a swap based on the desired output amount and price.\n   *\n   * @param amountOut - The desired output amount as a bigint.\n   * @param priceScaled - The scaled price as a bigint.\n   * @param scaleOffset - The scaling factor used for price adjustments.\n   * @param swapForY - A boolean indicating the direction of the swap\n   * @param rounding - Specifies the rounding mode\n   * @returns The calculated input amount as a bigint.\n   */\n  private calcAmountInByPrice(\n    amountOut: bigint,\n    priceScaled: bigint,\n    scaleOffset: number,\n    swapForY: boolean,\n    rounding: \"up\" | \"down\"\n  ): bigint {\n    if (swapForY) {\n      // amountIn = (amountOut << scaleOffset) / priceScaled\n      return rounding === \"up\"\n        ? ((amountOut << BigInt(scaleOffset)) + priceScaled - BigInt(1)) /\n            priceScaled\n        : (amountOut << BigInt(scaleOffset)) / priceScaled;\n    } else {\n      // amountIn = (amountOut * priceScaled) >> scaleOffset\n      return rounding === \"up\"\n        ? (amountOut * priceScaled +\n            (BigInt(1) << BigInt(scaleOffset)) -\n            BigInt(1)) >>\n            BigInt(scaleOffset)\n        : (amountOut * priceScaled) >> BigInt(scaleOffset);\n    }\n  }\n\n  /**\n   * Calculates the output amount based on the input amount, price, and scaling factors.\n   *\n   * @param amountIn - The input amount as a bigint.\n   * @param priceScaled - The scaled price as a bigint.\n   * @param scaleOffset - The scaling offset as a number, used to adjust the precision.\n   * @param swapForY - A boolean indicating the direction of the swap\n   * @param rounding - The rounding mode to apply when calculating the output amount\n   * @returns The calculated output amount as a bigint.\n   */\n  private calcAmountOutByPrice(\n    amountIn: bigint,\n    priceScaled: bigint,\n    scaleOffset: number,\n    swapForY: boolean,\n    rounding: \"up\" | \"down\"\n  ): bigint {\n    if (swapForY) {\n      // price = (Y / X) & swapForY => amountOut = amountIn * price\n      // amountOut = (amountIn * priceScaled) >> scaleOffset\n      return rounding === \"up\"\n        ? (amountIn * priceScaled +\n            (BigInt(1) << BigInt(scaleOffset)) -\n            BigInt(1)) >>\n            BigInt(scaleOffset)\n        : (amountIn * priceScaled) >> BigInt(scaleOffset);\n    } else {\n      // price = (X / Y) & !swapForY => amountOut = amountIn / price\n      // amountOut = (amountIn << scaleOffset) / priceScaled\n      return rounding === \"up\"\n        ? ((amountIn << BigInt(scaleOffset)) + priceScaled - BigInt(1)) /\n            priceScaled\n        : (amountIn << BigInt(scaleOffset)) / priceScaled;\n    }\n  }\n}\n","export const divRem = (numerator: number, denominator: number) => {\n  if (denominator === 0) {\n    throw new Error('Division by zero') // Xử lý lỗi chia cho 0\n  }\n\n  // Tính thương và phần dư\n  const quotient = numerator / denominator // Thương\n  const remainder = numerator % denominator // Phần dư\n\n  return [quotient, remainder] // Trả về mảng chứa thương và phần dư\n}\n\n/// (x * y) / denominator\nexport const mulDiv = (\n  x: number,\n  y: number,\n  denominator: number,\n  rounding: 'up' | 'down'\n) => {\n  const prod = x * y\n\n  if (rounding === 'up') {\n    return Math.floor((prod + denominator - 1) / denominator)\n  }\n\n  if (rounding === 'down') {\n    const [quotient] = divRem(prod, denominator)\n    return quotient\n  }\n}\n\nexport const mulShr = (\n  x: number,\n  y: number,\n  offset: number,\n  rounding: 'up' | 'down'\n) => {\n  const denominator = 1 << offset\n  return mulDiv(x, y, denominator, rounding)\n}\n\n// (x << offset) / y\nexport const shlDiv = (\n  x: number,\n  y: number,\n  offset: number,\n  rounding: 'up' | 'down'\n) => {\n  const scale = 1 << offset\n  return mulDiv(x, scale, y, rounding)\n}\n","import { Connection } from \"@solana/web3.js\";\nimport {\n  ACTIVE_ID,\n  BIN_ARRAY_SIZE,\n  FIXED_LENGTH,\n  MAX_BASIS_POINTS,\n  UNIT_PRICE_DEFAULT,\n} from \"../constants/config\";\nimport { Distribution, LiquidityShape, PositionInfo } from \"../types/services\";\nimport { divRem } from \"./math\";\n\ninterface CreateLiquidityDistributionParams {\n  shape: LiquidityShape;\n  binRange: [number, number];\n}\n\nconst getCurveDistributionFromBinRange = (binRange: number[]) => {\n  const activeId = 0;\n\n  // init return values\n  let deltaIds: number[] = [],\n    _distributionX: number[] = [],\n    _distributionY: number[] = [];\n\n  // get sigma based on radius R\n  const getSigma = (_R: number) => {\n    const factor =\n      _R >= 20\n        ? 2.0\n        : _R >= 15\n        ? 1.8\n        : _R >= 10\n        ? 1.7\n        : _R >= 8\n        ? 1.6\n        : _R >= 6\n        ? 1.5\n        : _R >= 5\n        ? 1.4\n        : 1.0;\n    return _R / factor;\n  };\n\n  // range only includes B tokens (Y tokens)\n  if (binRange[1] < activeId) {\n    const negDelta = binRange[1] - binRange[0] + 1;\n    const negativeDeltaIds = Array.from(Array(activeId - binRange[0]).keys())\n      .reverse()\n      .slice(0, negDelta)\n      .map((el) => -1 * (el + 1));\n\n    deltaIds = [...negativeDeltaIds];\n    if (activeId === binRange[1]) {\n      deltaIds.push(0);\n    }\n\n    _distributionX = [...Array(deltaIds.length).fill(0)];\n\n    // radius is num of bins\n    const R = deltaIds.length - 1;\n    const sigma = getSigma(R);\n\n    // A = 1 / (sigma  * sqrt(2 * pi))\n    const A = 1 / (Math.sqrt(Math.PI * 2) * sigma);\n\n    // dist = 2 * A * exp(-0.5 * (r /sigma) ^ 2)\n    // r is distance from right-most bin\n    _distributionY = deltaIds.map(\n      (_, ind) => 2 * A * Math.exp(-0.5 * Math.pow((R - ind) / sigma, 2))\n    );\n  }\n\n  // range only includes A tokens (X tokens)\n  else if (activeId < binRange[0]) {\n    const posDelta = binRange[1] - binRange[0] + 1;\n    const positiveDeltaIds = Array.from(Array(binRange[1] - activeId).keys())\n      .reverse()\n      .slice(0, posDelta)\n      .reverse()\n      .map((el) => el + 1);\n\n    deltaIds = [...positiveDeltaIds];\n    if (activeId === binRange[0]) {\n      deltaIds.unshift(0);\n    }\n\n    _distributionY = [...Array(deltaIds.length).fill(0)];\n\n    // radius is num of bins\n    const R = deltaIds.length - 1;\n    const sigma = getSigma(R);\n\n    // A = 1 / (sigma  * sqrt(2 * pi))\n    const A = 1 / (Math.sqrt(Math.PI * 2) * sigma);\n\n    // dist = 2 * A * exp(-0.5 * (r /sigma) ^ 2)\n    // r is distance from left-most bin\n    _distributionX = deltaIds.map(\n      (_, ind) => 2 * A * Math.exp(-0.5 * Math.pow(ind / sigma, 2))\n    );\n  }\n\n  // range includes both X and Y tokens\n  else {\n    const negDelta = activeId - binRange[0];\n    const posDelta = binRange[1] - activeId;\n\n    const negativeDeltaIds = Array.from(Array(negDelta).keys())\n      .reverse()\n      .map((el) => -1 * (el + 1));\n    const positiveDeltaIds = Array.from(Array(posDelta).keys()).map(\n      (el) => el + 1\n    );\n    deltaIds = [...negativeDeltaIds, 0, ...positiveDeltaIds];\n\n    // radius is num of bins\n    const RX = positiveDeltaIds.length;\n    const sigmaX = getSigma(RX);\n\n    // A = 1 / (sigma  * sqrt(2 * pi))\n    const AX = RX === 0 ? 1 : 1 / (Math.sqrt(Math.PI * 2) * sigmaX);\n\n    // dist = 2 * A * exp(-0.5 * (r /sigma) ^ 2)\n    // r is distance from 0\n    _distributionX = [\n      ...Array(negDelta).fill(0),\n      AX,\n      ...positiveDeltaIds.map(\n        (_, ind) => 2 * AX * Math.exp(-0.5 * Math.pow((ind + 1) / sigmaX, 2))\n      ),\n    ];\n\n    // radius is num of bins\n    const RY = negativeDeltaIds.length;\n    const sigmaY = getSigma(RY);\n\n    // A = 1 / (sigma  * sqrt(2 * pi))\n    const AY = RY === 0 ? 1 : 1 / (Math.sqrt(Math.PI * 2) * sigmaY);\n\n    // dist = 2 * A * exp(-0.5 * (r /sigma) ^ 2)\n    // r is distance from 0\n    _distributionY = [\n      ...negativeDeltaIds.map(\n        (_, ind) => 2 * AY * Math.exp(-0.5 * Math.pow((RY - ind) / sigmaY, 2))\n      ),\n      AY,\n      ...Array(posDelta).fill(0),\n    ];\n  }\n\n  let liquidityDistributionX = _distributionX.map((i) =>\n    Math.floor(i * MAX_BASIS_POINTS)\n  );\n\n  let liquidityDistributionY = _distributionY.map((i) =>\n    Math.floor(i * MAX_BASIS_POINTS)\n  );\n\n  // check totalX and totalY with MAX_BASIS_POINTS\n  const totalX = liquidityDistributionX.reduce((acc, val) => acc + val, 0);\n\n  const totalY = liquidityDistributionY.reduce((acc, val) => acc + val, 0);\n\n  if (totalX > 0 && totalX !== MAX_BASIS_POINTS) {\n    const isOverflow = totalX > MAX_BASIS_POINTS;\n    const overPoint = Math.abs(totalX - MAX_BASIS_POINTS);\n    const numberBins = liquidityDistributionX.filter((i) => i > 0).length;\n    const [quotient, remainder] = divRem(overPoint, numberBins);\n\n    liquidityDistributionX = liquidityDistributionX.map((i) => {\n      if (i === 0) return i;\n      return isOverflow ? i - Math.floor(quotient) : i + Math.floor(quotient);\n    });\n    let remainderLeft = remainder;\n    if (remainder > 0) {\n      if (!isOverflow) {\n        liquidityDistributionX = liquidityDistributionX.map((i) => {\n          if (i === 0) return i;\n          if (remainderLeft > 0) {\n            remainderLeft--;\n            return i + 1;\n          }\n          return i;\n        });\n      } else {\n        const reverseLiquid = liquidityDistributionX.reverse().map((i) => {\n          if (i === 0) return i;\n          if (remainderLeft > 0) {\n            remainderLeft--;\n            return i - 1;\n          }\n          return i;\n        });\n        liquidityDistributionX = reverseLiquid.reverse();\n      }\n    }\n  }\n\n  if (totalY > 0 && totalY !== MAX_BASIS_POINTS) {\n    const isOverflow = totalY > MAX_BASIS_POINTS;\n    const overPoint = Math.abs(totalY - MAX_BASIS_POINTS);\n    const numberBins = liquidityDistributionY.filter((i) => i > 0).length;\n    const [quotient, remainder] = divRem(overPoint, numberBins);\n\n    liquidityDistributionY = liquidityDistributionY.map((i, idx) => {\n      if (i === 0) return i;\n      if (remainder > 0 && idx === numberBins - 1) {\n        return isOverflow\n          ? i - Math.floor(quotient) - remainder\n          : i + Math.floor(quotient) + remainder;\n      }\n      return isOverflow ? i - Math.floor(quotient) : i + Math.floor(quotient);\n    });\n  }\n\n  //return\n  const liquidityDistribution = deltaIds.map((i, idx) => {\n    return {\n      relativeBinId: i,\n      distributionX: liquidityDistributionX[idx],\n      distributionY: liquidityDistributionY[idx],\n    };\n  });\n  return liquidityDistribution;\n};\n\nexport function createUniformDistribution(\n  params: CreateLiquidityDistributionParams\n): Distribution[] {\n  const { shape, binRange } = params;\n\n  const [minBin, maxBin] = binRange;\n\n  if (minBin > maxBin) {\n    throw new Error(\"Invalid binRange: minBin must be <= maxBin\");\n  }\n\n  const relativeIds = Array.from(\n    { length: maxBin - minBin + 1 },\n    (_, i) => i + minBin\n  );\n\n  if (shape === LiquidityShape.Spot) {\n    const totalArrayLength = maxBin - minBin + 1;\n    const findActiveBinIndex = relativeIds.findIndex((item) => item === 0);\n\n    if (findActiveBinIndex === -1) {\n      const isOnlyX = minBin > 0;\n      const isOnlyY = maxBin < 0;\n      const distribution = MAX_BASIS_POINTS / totalArrayLength;\n\n      return relativeIds.map((x) => ({\n        relativeBinId: x,\n        distributionX: isOnlyX ? distribution : 0,\n        distributionY: isOnlyY ? distribution : 0,\n      }));\n    }\n\n    const totalYBin = Math.abs(minBin);\n    const totalXBin = maxBin;\n\n    const distributionX = Array.from({ length: totalArrayLength }, (_, i) => {\n      if (i < findActiveBinIndex) return 0;\n      const pricePerBin = Math.floor(\n        (2 * MAX_BASIS_POINTS) / (totalXBin * 2 + 1)\n      );\n      if (i === findActiveBinIndex)\n        return MAX_BASIS_POINTS - pricePerBin * totalXBin;\n      return pricePerBin;\n    });\n\n    const distributionY = Array.from({ length: totalArrayLength }, (_, i) => {\n      if (i > findActiveBinIndex) return 0;\n      const pricePerBin = Math.floor(\n        (2 * MAX_BASIS_POINTS) / (totalYBin * 2 + 1)\n      );\n      if (i === findActiveBinIndex)\n        return MAX_BASIS_POINTS - pricePerBin * totalYBin;\n      return pricePerBin;\n    });\n\n    return relativeIds.map((x, i) => ({\n      relativeBinId: x,\n      distributionX: distributionX[i],\n      distributionY: distributionY[i],\n    }));\n  }\n\n  if (shape === LiquidityShape.Curve) {\n    return getCurveDistributionFromBinRange(binRange);\n  }\n\n  if (shape === LiquidityShape.BidAsk) {\n    //MAX_BASIS_POINTS = 10000\n    //binRange = [min, max]\n    //activeid = 0\n\n    const activeBin = 0;\n\n    let _distributionY: number[] = [];\n\n    let _distributionX: number[] = [];\n\n    let deltaIds: number[] = [];\n\n    if (maxBin < activeBin) {\n      const negDelta = maxBin - minBin + 1;\n      const negativeDeltaIds = Array.from(Array(activeBin - minBin).keys())\n        .reverse()\n        .slice(0, negDelta)\n        .map((el) => -1 * (el + 1));\n\n      deltaIds = [...negativeDeltaIds];\n\n      _distributionX = [...Array(deltaIds.length).fill(0)];\n\n      // dist = 2/R^2 * r\n      const rSquare = Math.pow(deltaIds[0], 2);\n      _distributionY = deltaIds.map((i) => ((i - 1) * -2) / rSquare);\n    } else if (activeBin < minBin) {\n      const posDelta = binRange[1] - binRange[0] + 1;\n      const positiveDeltaIds = Array.from(Array(binRange[1] - activeBin).keys())\n        .reverse()\n        .slice(0, posDelta)\n        .reverse()\n        .map((el) => el + 1);\n\n      deltaIds = [...positiveDeltaIds];\n      // dist = 2/R^2 * i\n      const rSquare = Math.pow(deltaIds[deltaIds.length - 1], 2);\n      _distributionX = deltaIds.map((i) => ((i + 1) * 2) / rSquare);\n      _distributionY = [...Array(deltaIds.length).fill(0)];\n    } else {\n      const negDelta = activeBin - binRange[0];\n      const posDelta = binRange[1] - activeBin;\n\n      const negativeDeltaIds = Array.from(Array(negDelta).keys())\n        .reverse()\n        .map((el) => -1 * (el + 1));\n      const positiveDeltaIds = Array.from(Array(posDelta).keys()).map(\n        (el) => el + 1\n      );\n\n      deltaIds = [...negativeDeltaIds, 0, ...positiveDeltaIds];\n\n      // dist = 1/R^2 * i\n      const rSquareX =\n        positiveDeltaIds.length === 0\n          ? 1\n          : positiveDeltaIds.length === 1 && positiveDeltaIds[0] === 1\n          ? 3\n          : Math.pow(positiveDeltaIds[positiveDeltaIds.length - 1], 2);\n      _distributionX = [\n        ...Array(negDelta).fill(0),\n        1 / rSquareX,\n        ...positiveDeltaIds.map((i) => (i + 1) / rSquareX),\n      ];\n\n      // dist = 1/R^2 * i\n      const rSquareY =\n        negativeDeltaIds.length === 0\n          ? 1\n          : negativeDeltaIds[0] === -1\n          ? 3\n          : Math.pow(negativeDeltaIds[0], 2);\n      _distributionY = [\n        ...negativeDeltaIds.map((i) => (-1 * (i - 1)) / rSquareY),\n        1 / rSquareY,\n        ...Array(posDelta).fill(0),\n      ];\n    }\n\n    let liquidityDistributionX = _distributionX.map((i) => {\n      return Math.floor(i * MAX_BASIS_POINTS);\n    });\n\n    let liquidityDistributionY = _distributionY.map((i) => {\n      return Math.floor(i * MAX_BASIS_POINTS);\n    });\n\n    // check totalX and totalY with MAX_BASIS_POINTS\n    const totalX = liquidityDistributionX.reduce((acc, val) => acc + val, 0);\n\n    const totalY = liquidityDistributionY.reduce((acc, val) => acc + val, 0);\n\n    if (totalX > 0 && totalX !== MAX_BASIS_POINTS) {\n      const isOverflow = totalX > MAX_BASIS_POINTS;\n      const overPoint = Math.abs(totalX - MAX_BASIS_POINTS);\n      const numberBins = liquidityDistributionX.filter((i) => i > 0).length;\n      const [quotient, remainder] = divRem(overPoint, numberBins);\n\n      liquidityDistributionX = liquidityDistributionX.map((i) => {\n        if (i === 0) return i;\n        return isOverflow ? i - Math.floor(quotient) : i + Math.floor(quotient);\n      });\n      let remainderLeft = remainder;\n      if (remainder > 0) {\n        if (!isOverflow) {\n          liquidityDistributionX = liquidityDistributionX.map((i) => {\n            if (i === 0) return i;\n            if (remainderLeft > 0) {\n              remainderLeft--;\n              return i + 1;\n            }\n            return i;\n          });\n        } else {\n          const reverseLiquid = liquidityDistributionX.reverse().map((i) => {\n            if (i === 0) return i;\n            if (remainderLeft > 0) {\n              remainderLeft--;\n              return i - 1;\n            }\n            return i;\n          });\n          liquidityDistributionX = reverseLiquid.reverse();\n        }\n      }\n    }\n\n    if (totalY > 0 && totalY !== MAX_BASIS_POINTS) {\n      const isOverflow = totalY > MAX_BASIS_POINTS;\n      const overPoint = Math.abs(totalY - MAX_BASIS_POINTS);\n      const numberBins = liquidityDistributionY.filter((i) => i > 0).length;\n      const [quotient, remainder] = divRem(overPoint, numberBins);\n\n      liquidityDistributionY = liquidityDistributionY.map((i, idx) => {\n        if (i === 0) return i;\n        if (remainder > 0 && idx === 0) {\n          return isOverflow\n            ? i - Math.floor(quotient) - remainder\n            : i + Math.floor(quotient) + remainder;\n        }\n        return isOverflow ? i - Math.floor(quotient) : i + Math.floor(quotient);\n      });\n    }\n\n    const liquidityDistribution = deltaIds.map((i, idx) => {\n      return {\n        relativeBinId: i,\n        distributionX: liquidityDistributionX[idx],\n        distributionY: liquidityDistributionY[idx],\n      };\n    });\n\n    return liquidityDistribution;\n  }\n\n  throw new Error(`Unsupported liquidity shape: ${shape}`);\n}\n\nexport const getMaxPosition = (range: [number, number], activeId: number) => {\n  const leftRangeIndex = Math.floor(activeId / 16);\n  const rangeFromIndex = [\n    Math.floor((activeId + range[0]) / 16),\n    Math.floor((activeId + range[1]) / 16),\n  ];\n\n  const positions = Array.from(\n    { length: rangeFromIndex[1] - rangeFromIndex[0] + 1 },\n    (_, index) => {\n      return rangeFromIndex[0] + index - leftRangeIndex;\n    }\n  );\n\n  return positions;\n};\n\nexport const getMaxBinArray = (range: [number, number], activeId: number) => {\n  const arrayIndex = [activeId + range[0], activeId + range[1]];\n\n  const binIndex = [\n    Math.floor(arrayIndex[0] / BIN_ARRAY_SIZE),\n    Math.floor(arrayIndex[1] / BIN_ARRAY_SIZE),\n  ];\n\n  // check if binArrayLower, binArrayUpper is the same\n  if (binIndex[1] === binIndex[0]) {\n    binIndex[1] += 1;\n  }\n\n  const binArrayIndexLen = binIndex[1] - binIndex[0] - 1;\n  const binArrayList = Array.from({ length: binArrayIndexLen + 1 }, (_, i) => {\n    const index = binIndex[0] + i * 2;\n    return {\n      binArrayLowerIndex: index,\n      binArrayUpperIndex: index + 1,\n    };\n  });\n\n  return binArrayList;\n};\n\nexport const getBinRange = (index: number, activeId: number) => {\n  const firstBinId = Math.floor(activeId % 16);\n\n  const firstArray = [-firstBinId, -firstBinId + 16 - 1];\n  const range = [\n    firstArray[0] + index * FIXED_LENGTH,\n    firstArray[1] + index * FIXED_LENGTH,\n  ];\n  return {\n    range,\n    binLower: activeId + range[0],\n    binUpper: activeId + range[1] - 1,\n  };\n};\n\nexport const findPosition = (index: number, activeBin = ACTIVE_ID) => (\n  position: PositionInfo\n) => {\n  const { binLower, binUpper } = getBinRange(index, activeBin);\n\n  return position.lowerBinId <= binLower && position.upperBinId >= binUpper;\n};\n\nexport const getGasPrice = async (connection: Connection): Promise<number> => {\n  const buffNum = 1;\n  try {\n    return await new Promise(async (resolve) => {\n      const timeout = setTimeout(() => {\n        resolve(UNIT_PRICE_DEFAULT * buffNum);\n      }, 2000);\n      const getPriority = await connection.getRecentPrioritizationFees();\n      const currentFee = getPriority\n        .filter((fee) => fee?.prioritizationFee > 0)\n        .map((fee) => fee?.prioritizationFee);\n      clearTimeout(timeout);\n      const unitPrice =\n        currentFee.length > 0\n          ? Math.max(...currentFee, UNIT_PRICE_DEFAULT)\n          : UNIT_PRICE_DEFAULT;\n      resolve(unitPrice * buffNum);\n    });\n  } catch {\n    return UNIT_PRICE_DEFAULT * buffNum;\n  }\n};","import {\n  ComputeBudgetProgram,\n  PublicKey,\n  SystemProgram,\n  Transaction,\n  TransactionMessage,\n} from \"@solana/web3.js\";\nimport { ILiquidityBookConfig, MODE, PoolMetadata } from \"../types\";\nimport {\n  BIN_ARRAY_INDEX,\n  BIN_ARRAY_SIZE,\n  CCU_LIMIT,\n  FIXED_LENGTH,\n  MAX_BASIS_POINTS,\n  PRECISION,\n  SCALE_OFFSET,\n  UNIT_PRICE_DEFAULT,\n  WRAP_SOL_ADDRESS,\n} from \"../constants/config\";\nimport { BN, utils } from \"@coral-xyz/anchor\";\nimport * as spl from \"@solana/spl-token\";\nimport { LiquidityBookAbstract } from \"../interface/liquidityBookAbstract\";\nimport { getProgram } from \"./getProgram\";\nimport { Buffer } from \"buffer\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport {\n  AddLiquidityIntoPositionParams,\n  CreatePairWithConfigParams,\n  CreatePositionParams,\n  GetBinArrayParams,\n  GetBinsArrayInfoParams,\n  GetBinsReserveParams,\n  GetBinsReserveResponse,\n  GetTokenOutputParams,\n  GetTokenOutputResponse,\n  GetUserVaultInfoParams,\n  Pair,\n  RemoveMultipleLiquidityParams,\n  RemoveMultipleLiquidityResponse,\n  ReserveParams,\n  SwapParams,\n  UserPositionsParams,\n} from \"../types/services\";\nimport { LBSwapService } from \"./swap\";\nimport bigDecimal from \"js-big-decimal\";\nimport { getIdFromPrice, getPriceFromId } from \"../utils/price\";\nimport { mulDiv, mulShr, shlDiv } from \"../utils/math\";\nimport LiquidityBookIDL from \"../constants/idl/liquidity_book.json\";\nimport { bs58 } from \"@coral-xyz/anchor/dist/cjs/utils/bytes\";\nimport { getGasPrice } from \"../utils\";\n\nexport class LiquidityBookServices extends LiquidityBookAbstract {\n  bufferGas?: number;\n  constructor(config: ILiquidityBookConfig) {\n    super(config);\n  }\n\n  get lbConfig() {\n    if (this.mode === MODE.DEVNET) {\n      return new PublicKey(\"BJG6uz2zY2XFG7uomiyi17qqDeYJUnbprGbpyzYN1ncU\");\n    }\n    return new PublicKey(\"BqPmjcPbAwE7mH23BY8q8VUEN4LSjhLUv41W87GsXVn8\");\n  }\n\n  get hooksConfig() {\n    if (this.mode === MODE.DEVNET) {\n      return new PublicKey(\"GN3UN8CtcSvC1VZxgHwfKqXXi642EwNk5K19FupZGMrZ\");\n    }\n    return new PublicKey(\"DgW5ARD9sU3W6SJqtyJSH3QPivxWt7EMvjER9hfFKWXF\");\n  }\n\n  public async getPairAccount(pair: PublicKey) {\n    //@ts-ignore\n    return await this.lbProgram.account.pair.fetch(pair);\n  }\n\n  public async getPositionAccount(position: PublicKey) {\n    //@ts-ignore\n    return await this.lbProgram.account.position.fetch(position);\n  }\n\n  async getBinArray(params: GetBinArrayParams) {\n    const { binArrayIndex, pair, payer, transaction } = params;\n\n    const binArray = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n        pair.toBuffer(),\n        new BN(binArrayIndex).toArrayLike(Buffer, \"le\", 4),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    if (transaction && payer) {\n      const binArrayInfo = await this.connection.getAccountInfo(binArray);\n\n      if (!binArrayInfo) {\n        const initializebinArrayConfigTx = await this.lbProgram.methods\n          .initializeBinArray(binArrayIndex)\n          .accountsPartial({ pair: pair, binArray: binArray, user: payer })\n          .instruction();\n        transaction.add(initializebinArrayConfigTx);\n      }\n    }\n\n    return binArray;\n  }\n\n  public async getBinArrayInfo(params: GetBinsArrayInfoParams) {\n    const { binArrayIndex, pair, payer } = params;\n    let resultIndex = binArrayIndex;\n    let result = [];\n\n    const binArray = await this.getBinArray({\n      binArrayIndex,\n      pair,\n      payer,\n    });\n    //@ts-ignore\n    const { bins } = await this.lbProgram.account.binArray.fetch(binArray);\n    try {\n      const binArrayOther = await this.getBinArray({\n        binArrayIndex: binArrayIndex + 1,\n        pair,\n        payer,\n      });\n      //@ts-ignore\n      const res = await this.lbProgram.account.binArray.fetch(binArrayOther);\n\n      result = [...bins, ...res.bins];\n    } catch {\n      const binArrayOther = await this.getBinArray({\n        binArrayIndex: binArrayIndex - 1,\n        pair,\n        payer,\n      });\n      //@ts-ignore\n      const res = await this.lbProgram.account.binArray.fetch(binArrayOther);\n      result = [...res.bins, ...bins];\n      resultIndex -= 1;\n    }\n\n    return { bins: result, resultIndex };\n  }\n\n  public async getBinsReserveInformation(\n    params: GetBinsReserveParams\n  ): Promise<GetBinsReserveResponse[]> {\n    const { position, pair, payer } = params;\n    const positionInfo = await this.getPositionAccount(position);\n    const firstBinId = positionInfo.lowerBinId;\n    const binArrayIndex = Math.floor(firstBinId / BIN_ARRAY_SIZE);\n\n    const { bins, resultIndex } = await this.getBinArrayInfo({\n      binArrayIndex,\n      pair,\n      payer,\n    });\n\n    const firstBinIndex = resultIndex * BIN_ARRAY_SIZE;\n    const binIds = Array.from(\n      { length: positionInfo.upperBinId - firstBinId + 1 },\n      (_, i) => firstBinId - firstBinIndex + i\n    );\n\n    const reserveXY = binIds.map((binId: number, index: number) => {\n      const liquidityShare = positionInfo.liquidityShares[index].toString();\n      const activeBin = bins[binId];\n\n      if (activeBin) {\n        const totalReserveX = +BigInt(activeBin.reserveX).toString();\n\n        const totalReserveY = +BigInt(activeBin.reserveY).toString();\n\n        const totalSupply = +BigInt(activeBin.totalSupply).toString();\n\n        const reserveX =\n          Number(totalReserveX) > 0\n            ? mulDiv(\n                Number(liquidityShare),\n                Number(totalReserveX),\n                Number(totalSupply),\n                \"down\"\n              )\n            : 0;\n\n        const reserveY =\n          Number(totalReserveY) > 0\n            ? mulDiv(\n                Number(liquidityShare),\n                Number(totalReserveY),\n                Number(totalSupply),\n                \"down\"\n              )\n            : 0;\n\n        return {\n          reserveX: reserveX || 0,\n          reserveY: reserveY || 0,\n          totalSupply: +BigInt(activeBin.totalSupply).toString(),\n          binId: firstBinId + index,\n          binPosistion: binId,\n          liquidityShare: positionInfo.liquidityShares[index],\n        };\n      }\n      return {\n        reserveX: 0,\n        reserveY: 0,\n        totalSupply: \"0\",\n        binId: firstBinId + index,\n        binPosistion: binId,\n        liquidityShare: liquidityShare,\n      };\n    });\n\n    return reserveXY;\n  }\n\n  public async createPairWithConfig(params: CreatePairWithConfigParams) {\n    const { tokenBase, tokenQuote, binStep, ratePrice, payer } = params;\n\n    const tokenX = new PublicKey(tokenBase.mintAddress);\n    const tokenY = new PublicKey(tokenQuote.mintAddress);\n\n    const id = getIdFromPrice(\n      ratePrice || 1,\n      binStep,\n      tokenBase.decimal,\n      tokenQuote.decimal\n    );\n\n    let binArrayIndex = id / BIN_ARRAY_SIZE;\n\n    if (id % BIN_ARRAY_SIZE < BIN_ARRAY_SIZE / 2) {\n      binArrayIndex -= 1;\n    }\n\n    const tx = new Transaction();\n\n    const binStepConfig = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"bin_step_config\")),\n        this.lbConfig!.toBuffer(),\n        new Uint8Array([binStep]),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    const quoteAssetBadge = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"quote_asset_badge\")),\n        this.lbConfig!.toBuffer(),\n        tokenY.toBuffer(),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    const pair = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"pair\")),\n        this.lbConfig!.toBuffer(),\n        tokenX.toBuffer(),\n        tokenY.toBuffer(),\n        new Uint8Array([binStep]),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    const initializePairConfigTx = await this.lbProgram.methods\n      .initializePair(id)\n      .accountsPartial({\n        liquidityBookConfig: this.lbConfig!,\n        binStepConfig: binStepConfig,\n        quoteAssetBadge: quoteAssetBadge,\n        pair: pair,\n        tokenMintX: tokenX,\n        tokenMintY: tokenY,\n        user: payer,\n      })\n      .instruction();\n\n    tx.add(initializePairConfigTx);\n\n    const binArrayLower = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n        pair.toBuffer(),\n        new BN(binArrayIndex).toArrayLike(Buffer, \"le\", 4),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    const binArrayUpper = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n        pair.toBuffer(),\n        new BN(Number(binArrayIndex) + 1).toArrayLike(Buffer, \"le\", 4),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    const initializeBinArrayLowerConfigTx = await this.lbProgram.methods\n      .initializeBinArray(binArrayIndex)\n      .accountsPartial({ pair: pair, binArray: binArrayLower, user: payer })\n      .instruction();\n\n    tx.add(initializeBinArrayLowerConfigTx);\n\n    const initializeBinArrayUpperConfigTx = await this.lbProgram.methods\n      .initializeBinArray(new BN(binArrayIndex + 1))\n      .accountsPartial({ pair: pair, binArray: binArrayUpper, user: payer })\n      .instruction();\n\n    tx.add(initializeBinArrayUpperConfigTx);\n\n    return {\n      tx,\n      pair: pair.toString(),\n      binArrayLower: binArrayLower.toString(),\n      binArrayUpper: binArrayUpper.toString(),\n      hooksConfig: this.hooksConfig.toString(),\n      activeBin: Number(id),\n    };\n  }\n\n  async createPosition(params: CreatePositionParams) {\n    const {\n      payer,\n      relativeBinIdLeft,\n      relativeBinIdRight,\n      pair,\n      binArrayIndex,\n      positionMint,\n      transaction,\n    } = params;\n\n    const position = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"position\")),\n        positionMint.toBuffer(),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    const positionVault = spl.getAssociatedTokenAddressSync(\n      positionMint,\n      payer,\n      true,\n      spl.TOKEN_2022_PROGRAM_ID\n    );\n\n    await this.getBinArray({\n      binArrayIndex,\n      pair,\n      payer,\n    });\n\n    await this.getBinArray({\n      binArrayIndex: binArrayIndex + 1,\n      pair,\n      payer,\n    });\n\n    const initializePositionTx = await this.lbProgram.methods\n      .createPosition(new BN(relativeBinIdLeft), new BN(relativeBinIdRight))\n      .accountsPartial({\n        pair,\n        position: position,\n        positionMint: positionMint,\n        positionTokenAccount: positionVault,\n        tokenProgram: spl.TOKEN_2022_PROGRAM_ID,\n        user: payer,\n      })\n      .instruction();\n\n    transaction.add(initializePositionTx);\n\n    return { position: position.toString() };\n  }\n\n  async addLiquidityIntoPosition(params: AddLiquidityIntoPositionParams) {\n    const {\n      positionMint,\n      payer,\n      pair,\n      binArrayLower,\n      binArrayUpper,\n      transaction,\n      liquidityDistribution,\n      amountX,\n      amountY,\n    } = params;\n\n    const pairInfo = await this.getPairAccount(pair);\n\n    const tokenProgramX = await getProgram(\n      pairInfo.tokenMintX,\n      this.connection\n    );\n    const tokenProgramY = await getProgram(\n      pairInfo.tokenMintY,\n      this.connection\n    );\n\n    const associatedPairVaultX = await this.getPairVaultInfo({\n      tokenAddress: pairInfo.tokenMintX,\n      pair,\n    });\n\n    const associatedPairVaultY = await this.getPairVaultInfo({\n      tokenAddress: pairInfo.tokenMintY,\n      pair,\n    });\n\n    const associatedUserVaultX = await this.getUserVaultInfo({\n      tokenAddress: pairInfo.tokenMintX,\n      payer,\n    });\n\n    const associatedUserVaultY = await this.getUserVaultInfo({\n      tokenAddress: pairInfo.tokenMintY,\n      payer,\n    });\n\n    if (\n      pairInfo.tokenMintY.toString() === WRAP_SOL_ADDRESS ||\n      pairInfo.tokenMintX.toString() === WRAP_SOL_ADDRESS\n    ) {\n      const isNativeY = pairInfo.tokenMintY.toString() === WRAP_SOL_ADDRESS;\n\n      const totalAmount = isNativeY ? amountY : amountX;\n      const totalLiquid = liquidityDistribution.reduce((prev, curr) => {\n        const currAmount = isNativeY ? curr.distributionY : curr.distributionX;\n        return prev + currAmount;\n      }, 0);\n\n      if (totalLiquid) {\n        const amount = (totalLiquid * totalAmount) / MAX_BASIS_POINTS;\n\n        const associatedUserVault = isNativeY\n          ? associatedUserVaultY\n          : associatedUserVaultX;\n\n        transaction.add(\n          SystemProgram.transfer({\n            fromPubkey: payer,\n            toPubkey: associatedUserVault,\n            lamports: amount,\n          })\n        );\n        transaction.add(spl.createSyncNativeInstruction(associatedUserVault));\n      }\n    }\n\n    const unitSPrice = await getGasPrice(this.connection).catch(\n      () => undefined\n    );\n\n    const unitPrice = Math.max(\n      Number(unitSPrice) ?? 0,\n      UNIT_PRICE_DEFAULT * (this.bufferGas ?? 1)\n    );\n\n    const hook = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"hook\")),\n        this.hooksConfig.toBuffer(),\n        pair.toBuffer(),\n      ],\n      this.hooksProgram.programId\n    )[0];\n\n    const position = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"position\")),\n        positionMint.toBuffer(),\n      ],\n      this.lbProgram.programId\n    )[0];\n\n    const positionVault = spl.getAssociatedTokenAddressSync(\n      positionMint,\n      payer,\n      true,\n      spl.TOKEN_2022_PROGRAM_ID\n    );\n\n    const addLiquidityInstructions = await this.lbProgram.methods\n      .increasePosition(new BN(amountX), new BN(amountY), liquidityDistribution)\n      .accountsPartial({\n        pair: pair,\n        position: position,\n        binArrayLower: binArrayLower,\n        binArrayUpper: binArrayUpper,\n        tokenVaultX: associatedPairVaultX,\n        tokenVaultY: associatedPairVaultY,\n        userVaultX: associatedUserVaultX,\n        userVaultY: associatedUserVaultY,\n        positionTokenAccount: positionVault,\n        tokenMintX: pairInfo.tokenMintX,\n        tokenMintY: pairInfo.tokenMintY,\n        tokenProgramX,\n        tokenProgramY,\n        positionTokenProgram: spl.TOKEN_2022_PROGRAM_ID,\n        hook: hook,\n        hooksProgram: this.hooksProgram.programId,\n        user: payer,\n        positionMint,\n      })\n      .remainingAccounts([\n        { pubkey: pair, isWritable: false, isSigner: false },\n        { pubkey: binArrayLower, isWritable: false, isSigner: false },\n        { pubkey: binArrayUpper, isWritable: false, isSigner: false },\n      ])\n      .instruction();\n\n    transaction.add(\n      ComputeBudgetProgram.setComputeUnitLimit({\n        units: CCU_LIMIT,\n      })\n    );\n    transaction.add(\n      ComputeBudgetProgram.setComputeUnitPrice({\n        microLamports: unitPrice,\n      })\n    );\n\n    transaction.add(addLiquidityInstructions);\n  }\n\n  public async removeMultipleLiquidity(\n    params: RemoveMultipleLiquidityParams\n  ): Promise<RemoveMultipleLiquidityResponse> {\n    const { maxPositionList, payer, type, pair, tokenMintX, tokenMintY } =\n      params;\n\n    const tokenProgramX = await getProgram(tokenMintX, this.connection);\n    const tokenProgramY = await getProgram(tokenMintY, this.connection);\n\n    const txCreateAccount = new Transaction();\n\n    const associatedPairVaultX = await this.getPairVaultInfo({\n      tokenAddress: tokenMintX,\n      pair,\n      payer,\n      transaction: txCreateAccount,\n    });\n\n    const associatedPairVaultY = await this.getPairVaultInfo({\n      tokenAddress: tokenMintY,\n      pair,\n      payer,\n      transaction: txCreateAccount,\n    });\n\n    const associatedUserVaultX = await this.getUserVaultInfo({\n      tokenAddress: tokenMintX,\n      payer,\n      transaction: txCreateAccount,\n    });\n\n    const associatedUserVaultY = await this.getUserVaultInfo({\n      tokenAddress: tokenMintY,\n      payer,\n      transaction: txCreateAccount,\n    });\n\n    const hook = PublicKey.findProgramAddressSync(\n      [\n        Buffer.from(utils.bytes.utf8.encode(\"hook\")),\n        this.hooksConfig!.toBuffer(),\n        pair.toBuffer(),\n      ],\n      this.hooksProgram.programId\n    )[0];\n\n    const associatedHookTokenY = spl.getAssociatedTokenAddressSync(\n      tokenMintY,\n      hook,\n      true,\n      tokenProgramY\n    );\n    const infoHookTokenY =\n      await this.connection.getAccountInfo(associatedHookTokenY);\n\n    if (!infoHookTokenY) {\n      const hookTokenYInstructions =\n        spl.createAssociatedTokenAccountInstruction(\n          payer,\n          associatedHookTokenY,\n          hook,\n          tokenMintY,\n          tokenProgramY\n        );\n\n      txCreateAccount.add(hookTokenYInstructions);\n    }\n\n    const unitSPrice = await getGasPrice(this.connection).catch(\n      () => undefined\n    );\n\n    const unitPrice = Math.max(\n      Number(unitSPrice) ?? 0,\n      UNIT_PRICE_DEFAULT * (this.bufferGas ?? 1)\n    );\n\n    const positionClosed: Record<string, string>[] = [];\n    const txs = await Promise.all(\n      maxPositionList.map(async ({ position, start, end, positionMint }) => {\n        const binArrayIndex = Math.floor(start / BIN_ARRAY_SIZE);\n\n        const { resultIndex } = await this.getBinArrayInfo({\n          binArrayIndex,\n          pair,\n          payer,\n        });\n\n        const binArrayLower = await this.getBinArray({\n          binArrayIndex: resultIndex,\n          pair,\n          payer,\n        });\n\n        const binArrayUpper = await this.getBinArray({\n          binArrayIndex: resultIndex + 1,\n          pair,\n          payer,\n        });\n\n        const tx = new Transaction();\n        tx.add(\n          ComputeBudgetProgram.setComputeUnitLimit({\n            units: CCU_LIMIT,\n          })\n        );\n        tx.add(\n          ComputeBudgetProgram.setComputeUnitPrice({\n            microLamports: unitPrice,\n          })\n        );\n\n        const positionVault = spl.getAssociatedTokenAddressSync(\n          new PublicKey(positionMint),\n          payer,\n          true,\n          spl.TOKEN_2022_PROGRAM_ID\n        );\n\n        const reserveXY = cloneDeep(\n          await this.getBinsReserveInformation({\n            position: new PublicKey(position),\n            pair,\n            payer,\n          })\n        );\n\n        const hookBinArrayLower = PublicKey.findProgramAddressSync(\n          [\n            Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n            hook.toBuffer(),\n            new BN(BIN_ARRAY_INDEX).toArrayLike(Buffer, \"le\", 4),\n          ],\n          this.hooksProgram.programId\n        )[0];\n\n        const hookBinArrayUpper = PublicKey.findProgramAddressSync(\n          [\n            Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n            hook.toBuffer(),\n            new BN(BIN_ARRAY_INDEX + 1).toArrayLike(Buffer, \"le\", 4),\n          ],\n          this.hooksProgram.programId\n        )[0];\n\n        const hookPosition = PublicKey.findProgramAddressSync(\n          [\n            Buffer.from(utils.bytes.utf8.encode(\"position\")),\n            hook.toBuffer(),\n            new PublicKey(position).toBuffer(),\n          ],\n          this.hooksProgram.programId\n        )[0];\n\n        let removedShares: BN[] = [];\n\n        if (type === \"removeBoth\") {\n          removedShares = reserveXY.map((reserve: ReserveParams) => {\n            const binId = reserve.binId;\n            if (binId >= Number(start) && binId <= Number(end)) {\n              return reserve.liquidityShare;\n            }\n\n            return new BN(0);\n          });\n        }\n\n        if (type === \"removeBaseToken\") {\n          removedShares = reserveXY.map((reserve: ReserveParams) => {\n            if (reserve.reserveX && reserve.reserveY === 0) {\n              return reserve.liquidityShare;\n            }\n\n            return new BN(0);\n          });\n        }\n\n        if (type === \"removeQuoteToken\") {\n          removedShares = reserveXY.map((reserve: ReserveParams) => {\n            if (reserve.reserveY && reserve.reserveX === 0) {\n              return reserve.liquidityShare;\n            }\n\n            return new BN(0);\n          });\n        }\n\n        const availableShares = reserveXY.filter((item: ReserveParams) =>\n          type === \"removeBoth\"\n            ? !new BN(item.liquidityShare).eq(new BN(0))\n            : type === \"removeQuoteToken\"\n              ? !item.reserveX\n              : !item.reserveY\n        );\n\n        const isClosePosition =\n          (type === \"removeBoth\" &&\n            end - start + 1 >= availableShares.length) ||\n          (end - start + 1 === FIXED_LENGTH &&\n            availableShares.length === FIXED_LENGTH);\n        if (isClosePosition) {\n          const instructions = await this.lbProgram.methods\n            .closePosition()\n            .accountsPartial({\n              pair,\n              position,\n              binArrayLower: binArrayLower,\n              binArrayUpper: binArrayUpper,\n              tokenVaultX: associatedPairVaultX,\n              tokenVaultY: associatedPairVaultY,\n              userVaultX: associatedUserVaultX,\n              userVaultY: associatedUserVaultY,\n              positionTokenAccount: positionVault,\n              tokenMintX,\n              tokenMintY,\n              tokenProgramX,\n              tokenProgramY,\n              positionTokenProgram: spl.TOKEN_2022_PROGRAM_ID,\n              hook,\n              hooksProgram: this.hooksProgram.programId,\n              user: payer,\n              positionMint,\n            })\n            .instruction();\n\n          positionClosed.push({ position });\n          tx.add(instructions);\n        } else {\n          const instructions = await this.lbProgram.methods\n            .decreasePosition(removedShares)\n            .accountsPartial({\n              pair: pair,\n              position,\n              binArrayLower: binArrayLower,\n              binArrayUpper: binArrayUpper,\n              tokenVaultX: associatedPairVaultX,\n              tokenVaultY: associatedPairVaultY,\n              userVaultX: associatedUserVaultX,\n              userVaultY: associatedUserVaultY,\n              positionTokenAccount: positionVault,\n              tokenMintX: tokenMintX,\n              tokenMintY: tokenMintY,\n              tokenProgramX,\n              tokenProgramY,\n              positionTokenProgram: spl.TOKEN_2022_PROGRAM_ID,\n              hook: hook,\n              hooksProgram: this.hooksProgram.programId,\n              user: payer,\n              positionMint,\n            })\n            ?.remainingAccounts([\n              { pubkey: pair, isWritable: false, isSigner: false },\n              { pubkey: binArrayLower, isWritable: false, isSigner: false },\n              { pubkey: binArrayUpper, isWritable: false, isSigner: false },\n              { pubkey: hookBinArrayLower, isWritable: true, isSigner: false },\n              { pubkey: hookBinArrayUpper, isWritable: true, isSigner: false },\n              { pubkey: hookPosition, isWritable: true, isSigner: false },\n            ])\n            .instruction();\n\n          tx.add(instructions);\n        }\n\n        return tx;\n      })\n    );\n\n    const txCloseAccount = new Transaction();\n\n    if (\n      tokenMintY.toString() === WRAP_SOL_ADDRESS ||\n      tokenMintX.toString() === WRAP_SOL_ADDRESS\n    ) {\n      const isNativeY = tokenMintY.toString() === WRAP_SOL_ADDRESS;\n\n      const associatedUserVault = isNativeY\n        ? associatedUserVaultY\n        : associatedUserVaultX;\n\n      txCloseAccount.add(\n        spl.createCloseAccountInstruction(associatedUserVault, payer, payer)\n      );\n    }\n\n    return {\n      txs,\n      txCreateAccount: txCreateAccount.instructions.length\n        ? txCreateAccount\n        : undefined,\n      txCloseAccount: txCloseAccount.instructions.length\n        ? txCloseAccount\n        : undefined,\n      positionClosed,\n    };\n  }\n\n  public async swap(params: SwapParams): Promise<Transaction> {\n    const {\n      tokenMintX,\n      tokenMintY,\n      amount,\n      otherAmountOffset,\n      swapForY,\n      isExactInput,\n      pair,\n      payer,\n    } = params;\n\n    const pairInfo = await this.getPairAccount(pair);\n    if (!pairInfo) throw new Error(\"Pair not found\");\n\n    const currentBinArrayIndex = Math.floor(pairInfo.activeId / BIN_ARRAY_SIZE);\n\n    const surroundingIndexes = [\n      currentBinArrayIndex - 1,\n      currentBinArrayIndex,\n      currentBinArrayIndex + 1,\n    ];\n\n    const binArrayAddresses = await Promise.all(\n      surroundingIndexes.map(\n        async (idx) =>\n          await this.getBinArray({\n            binArrayIndex: idx,\n            pair,\n            payer,\n          })\n      )\n    );\n\n    const binArrayAccountsInfo =\n      await this.connection.getMultipleAccountsInfo(binArrayAddresses);\n\n    const validIndexes = surroundingIndexes.filter(\n      (_, i) => binArrayAccountsInfo[i]\n    );\n\n    if (validIndexes.length < 2) {\n      throw new Error(\"No valid bin arrays found for the pair\");\n    }\n\n    let binArrayLowerIndex: number;\n    let binArrayUpperIndex: number;\n    if (validIndexes.length === 2) {\n      [binArrayLowerIndex, binArrayUpperIndex] = validIndexes;\n    } else {\n      const activeOffset = pairInfo.activeId % BIN_ARRAY_SIZE;\n      const [first, second, third] = validIndexes;\n      [binArrayLowerIndex, binArrayUpperIndex] =\n        activeOffset < BIN_ARRAY_SIZE / 2 ? [first, second] : [second, third];\n    }\n\n    const binArrayLower = await this.getBinArray({\n      pair,\n      binArrayIndex: binArrayLowerIndex,\n      payer,\n    });\n\n    const binArrayUpper = await this.getBinArray({\n      pair,\n      binArrayIndex: binArrayUpperIndex,\n      payer,\n    });\n\n    const [tokenProgramX, tokenProgramY] = await Promise.all([\n      getProgram(tokenMintX, this.connection),\n      getProgram(tokenMintY, this.connection),\n    ]);\n\n    const latestBlockHash = await this.connection.getLatestBlockhash();\n    const tx = new Transaction({\n      feePayer: payer,\n      blockhash: latestBlockHash.blockhash,\n      lastValidBlockHeight: latestBlockHash.lastValidBlockHeight,\n    });\n\n    const associatedPairVaultX = spl.getAssociatedTokenAddressSync(\n      tokenMintX,\n      pair,\n      true,\n      tokenProgramX\n    );\n\n    const associatedPairVaultY = spl.getAssociatedTokenAddressSync(\n      tokenMintY,\n      pair,\n      true,\n      tokenProgramY\n    );\n\n    const associatedUserVaultX = spl.getAssociatedTokenAddressSync(\n      tokenMintX,\n      payer,\n      true,\n      tokenProgramX\n    );\n\n    const associatedUserVaultY = spl.getAssociatedTokenAddressSync(\n      tokenMintY,\n      payer,\n      true,\n      tokenProgramY\n    );\n\n    const infoUserVaultX =\n      await this.connection.getAccountInfo(associatedUserVaultX);\n\n    if (!infoUserVaultX) {\n      const userVaultXInstructions =\n        spl.createAssociatedTokenAccountInstruction(\n          payer,\n          associatedUserVaultX,\n          payer,\n          tokenMintX,\n          tokenProgramX\n        );\n\n      tx.add(userVaultXInstructions);\n    }\n\n    const infoUserVaultY =\n      await this.connection.getAccountInfo(associatedUserVaultY);\n\n    if (!infoUserVaultY) {\n      const userVaultYInstructions =\n        spl.createAssociatedTokenAccountInstruction(\n          payer,\n          associatedUserVaultY,\n          payer,\n          tokenMintY,\n          tokenProgramY\n        );\n\n      tx.add(userVaultYInstructions);\n    }\n\n    let remainingAccounts = [\n      { pubkey: pair, isWritable: false, isSigner: false },\n      { pubkey: binArrayLower, isWritable: false, isSigner: false },\n      { pubkey: binArrayUpper, isWritable: false, isSigner: false },\n    ];\n\n    if (!!pairInfo.hook) {\n      const hookBinArrayLower = PublicKey.findProgramAddressSync(\n        [\n          Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n          pairInfo.hook.toBuffer(),\n          new BN(binArrayLowerIndex).toArrayLike(Buffer, \"le\", 4),\n        ],\n        this.hooksProgram.programId\n      )[0];\n\n      const hookBinArrayUpper = PublicKey.findProgramAddressSync(\n        [\n          Buffer.from(utils.bytes.utf8.encode(\"bin_array\")),\n          pairInfo.hook.toBuffer(),\n          new BN(binArrayUpperIndex).toArrayLike(Buffer, \"le\", 4),\n        ],\n        this.hooksProgram.programId\n      )[0];\n\n      remainingAccounts = [\n        { pubkey: hookBinArrayLower, isWritable: true, isSigner: false },\n        { pubkey: hookBinArrayUpper, isWritable: true, isSigner: false },\n        { pubkey: pair, isWritable: false, isSigner: false },\n        { pubkey: hookBinArrayLower, isWritable: true, isSigner: false },\n        { pubkey: hookBinArrayUpper, isWritable: true, isSigner: false },\n      ];\n    }\n\n    if (\n      tokenMintY.toString() === WRAP_SOL_ADDRESS ||\n      tokenMintX.toString() === WRAP_SOL_ADDRESS\n    ) {\n      const isNativeY = tokenMintY.toString() === WRAP_SOL_ADDRESS;\n\n      const associatedUserVault = isNativeY\n        ? associatedUserVaultY\n        : associatedUserVaultX;\n\n      if (isNativeY && !swapForY) {\n        tx.add(\n          SystemProgram.transfer({\n            fromPubkey: payer,\n            toPubkey: associatedUserVault,\n            lamports: amount,\n          })\n        );\n        tx.add(spl.createSyncNativeInstruction(associatedUserVault));\n      }\n\n      if (!isNativeY && swapForY) {\n        tx.add(\n          SystemProgram.transfer({\n            fromPubkey: payer,\n            toPubkey: associatedUserVault,\n            lamports: amount,\n          })\n        );\n        tx.add(spl.createSyncNativeInstruction(associatedUserVault));\n      }\n    }\n\n    const swapInstructions = await this.lbProgram.methods\n      .swap(\n        new BN(amount.toString()),\n        new BN(otherAmountOffset.toString()),\n        swapForY,\n        isExactInput ? { exactInput: {} } : { exactOutput: {} }\n      )\n      .accountsPartial({\n        pair: pair,\n        binArrayLower: binArrayLower,\n        binArrayUpper: binArrayUpper,\n        tokenVaultX: associatedPairVaultX,\n        tokenVaultY: associatedPairVaultY,\n        userVaultX: associatedUserVaultX,\n        userVaultY: associatedUserVaultY,\n        tokenMintX: tokenMintX,\n        tokenMintY: tokenMintY,\n        tokenProgramX,\n        tokenProgramY,\n        user: payer,\n        hook: pairInfo.hook || null,\n        hooksProgram: this.hooksProgram.programId,\n      })\n      .remainingAccounts(remainingAccounts)\n      .instruction();\n\n    tx.add(swapInstructions);\n\n    if (\n      tokenMintY.toString() === WRAP_SOL_ADDRESS ||\n      tokenMintX.toString() === WRAP_SOL_ADDRESS\n    ) {\n      const isNativeY = tokenMintY.toString() === WRAP_SOL_ADDRESS;\n\n      const associatedUserVault = isNativeY\n        ? associatedUserVaultY\n        : associatedUserVaultX;\n      if ((isNativeY && swapForY) || (!isNativeY && !swapForY)) {\n        tx.add(\n          spl.createCloseAccountInstruction(associatedUserVault, payer, payer)\n        );\n      }\n    }\n\n    return tx;\n  }\n\n  public async getQuote(\n    params: GetTokenOutputParams\n  ): Promise<GetTokenOutputResponse> {\n    try {\n      const data = await LBSwapService.fromLbConfig(\n        this.lbProgram,\n        this.connection\n      ).calculateInOutAmount(params);\n      const { amountIn, amountOut } = data;\n\n      const slippageFraction = params.slippage / 100;\n      const slippageScaled = Math.round(slippageFraction * PRECISION);\n      let maxAmountIn = amountIn;\n      let minAmountOut = amountOut;\n      if (params.isExactInput) {\n        minAmountOut =\n          (amountOut * BigInt(PRECISION - slippageScaled)) / BigInt(PRECISION);\n      } else {\n        // max mount in should div for slippage\n        maxAmountIn =\n          (amountIn * BigInt(PRECISION)) / BigInt(PRECISION - slippageScaled);\n      }\n\n      const { maxAmountOut } = await this.getMaxAmountOutWithFee(\n        params.pair,\n        Number(amountIn.toString()),\n        params.swapForY,\n        params.tokenBaseDecimal,\n        params.tokenQuoteDecimal\n      );\n\n      const priceImpact = new bigDecimal(amountOut)\n        .subtract(new bigDecimal(maxAmountOut))\n        .divide(new bigDecimal(maxAmountOut))\n        .multiply(new bigDecimal(100))\n        .getValue();\n\n      return {\n        amountIn: amountIn,\n        amountOut: amountOut,\n        amount: params.isExactInput ? maxAmountIn : minAmountOut,\n        otherAmountOffset: params.isExactInput ? minAmountOut : maxAmountIn,\n        priceImpact: Number(priceImpact),\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  public async getMaxAmountOutWithFee(\n    pairAddress: PublicKey,\n    amount: number,\n    swapForY: boolean = false,\n    decimalBase: number = 9,\n    decimalQuote: number = 9\n  ) {\n    try {\n      let amountIn = BigInt(amount);\n      const pair = await this.getPairAccount(pairAddress);\n      const activeId = pair?.activeId;\n      const binStep = pair?.binStep;\n      const swapService = LBSwapService.fromLbConfig(\n        this.lbProgram,\n        this.connection\n      );\n      const feePrice = swapService.getTotalFee(pair);\n      const activePrice = getPriceFromId(binStep, activeId, 9, 9);\n      const price = getPriceFromId(\n        binStep,\n        activeId,\n        decimalBase,\n        decimalQuote\n      );\n\n      const feeAmount = swapService.getFeeAmount(amountIn, feePrice);\n      amountIn = BigInt(amountIn) - BigInt(feeAmount); // new BN(amountIn).subtract(new BN(feeAmount));\n      const maxAmountOut = swapForY\n        ? mulShr(Number(amountIn.toString()), activePrice, SCALE_OFFSET, \"down\")\n        : shlDiv(\n            Number(amountIn.toString()),\n            activePrice,\n            SCALE_OFFSET,\n            \"down\"\n          );\n\n      return { maxAmountOut, price };\n    } catch {}\n\n    return { maxAmountOut: 0, price: 0 };\n  }\n\n  public getDexName() {\n    return \"Saros DLMM\";\n  }\n\n  public getDexProgramId() {\n    return this.lbProgram.programId;\n  }\n\n  public async fetchPoolAddresses() {\n    const programId = this.getDexProgramId();\n    const connection = this.connection;\n    const pairAccount = LiquidityBookIDL.accounts.find(\n      (acc) => acc.name === \"Pair\"\n    );\n    const pairAccountDiscriminator = pairAccount\n      ? pairAccount.discriminator\n      : undefined;\n\n    if (!pairAccountDiscriminator) {\n      throw new Error(\"Pair account not found\");\n    }\n\n    const accounts = await connection.getProgramAccounts(\n      new PublicKey(programId),\n      {\n        filters: [\n          {\n            memcmp: { offset: 0, bytes: bs58.encode(pairAccountDiscriminator) },\n          },\n        ],\n      }\n    );\n    if (accounts.length === 0) {\n      throw new Error(\"Pair not found\");\n    }\n    const poolAdresses = accounts.reduce((addresses: string[], account) => {\n      if (account.account.owner.toString() !== programId.toString()) {\n        return addresses;\n      }\n      if (account.account.data.length < 8) {\n        return addresses;\n      }\n      addresses.push(account.pubkey.toString());\n      return addresses;\n    }, []);\n\n    return poolAdresses;\n  }\n\n  public async getUserPositions({ payer, pair }: UserPositionsParams) {\n    const connection = this.connection;\n    const tokenAccounts = await connection.getParsedTokenAccountsByOwner(\n      payer,\n      {\n        programId: spl.TOKEN_2022_PROGRAM_ID,\n      }\n    );\n\n    const positionMints = tokenAccounts.value\n      .filter((acc) => {\n        const amount = acc.account.data.parsed.info.tokenAmount.uiAmount;\n        // Only interested in NFTs or position tokens with amount > 0\n        return amount && amount > 0;\n      })\n      .map((acc) => new PublicKey(acc.account.data.parsed.info.mint));\n\n    const positions = await Promise.all(\n      positionMints.map(async (mint) => {\n        // Derive PDA for Position account\n        const [positionPda] = await PublicKey.findProgramAddressSync(\n          [Buffer.from(utils.bytes.utf8.encode(\"position\")), mint.toBuffer()],\n          this.lbProgram.programId\n        );\n        // Fetch and decode the Position account\n        try {\n          const accountInfo = await connection.getAccountInfo(positionPda);\n          if (!accountInfo) return null;\n          //@ts-ignore\n          const position =\n            await this.lbProgram.account.position.fetch(positionPda);\n          if (position.pair.toString() !== pair.toString()) return null;\n          return { ...position, position: positionPda.toString() };\n        } catch {\n          return null;\n        }\n      })\n    );\n    return positions.filter(Boolean);\n  }\n\n  public async quote(params: {\n    amount: number;\n    metadata: PoolMetadata;\n    optional: {\n      isExactInput: boolean;\n      swapForY: boolean;\n      slippage: number;\n    };\n  }) {\n    const { amount, metadata, optional } = params;\n\n    return await this.getQuote({\n      amount: BigInt(amount),\n      isExactInput: optional.isExactInput,\n      pair: new PublicKey(metadata.poolAddress),\n      slippage: optional.slippage,\n      swapForY: optional.swapForY,\n      tokenBase: new PublicKey(metadata.baseMint),\n      tokenBaseDecimal: metadata.extra.tokenBaseDecimal,\n      tokenQuote: new PublicKey(metadata.quoteMint),\n      tokenQuoteDecimal: metadata.extra.tokenQuoteDecimal,\n    });\n  }\n\n  public async fetchPoolMetadata(pair: string): Promise<PoolMetadata> {\n    const connection = this.connection;\n    //@ts-ignore\n    const pairInfo: Pair = await this.lbProgram.account.pair.fetch(\n      new PublicKey(pair)\n    );\n    if (!pairInfo) {\n      throw new Error(\"Pair not found\");\n    }\n\n    const basePairVault = await this.getPairVaultInfo({\n      tokenAddress: new PublicKey(pairInfo.tokenMintX),\n      pair: new PublicKey(pair),\n    });\n    const quotePairVault = await this.getPairVaultInfo({\n      tokenAddress: new PublicKey(pairInfo.tokenMintY),\n      pair: new PublicKey(pair),\n    });\n\n    const [baseReserve, quoteReserve] = await Promise.all([\n      connection.getTokenAccountBalance(basePairVault).catch(() => ({\n        value: {\n          uiAmount: 0,\n          amount: \"0\",\n          decimals: 0,\n          uiAmountString: \"0\",\n        },\n      })),\n      connection.getTokenAccountBalance(quotePairVault).catch(() => ({\n        value: {\n          uiAmount: 0,\n          amount: \"0\",\n          decimals: 0,\n          uiAmountString: \"0\",\n        },\n      })),\n    ]);\n\n    return {\n      poolAddress: pair,\n      baseMint: pairInfo.tokenMintX.toString(),\n      baseReserve: baseReserve.value.amount,\n      quoteMint: pairInfo.tokenMintY.toString(),\n      quoteReserve: quoteReserve.value.amount,\n      tradeFee:\n        (pairInfo.staticFeeParameters.baseFactor * pairInfo.binStep) / 1e6,\n      extra: {\n        hook: pairInfo.hook?.toString(),\n        tokenQuoteDecimal: baseReserve.value.decimals,\n        tokenBaseDecimal: quoteReserve.value.decimals,\n      },\n    };\n  }\n\n  public async getPairVaultInfo(params: {\n    tokenAddress: PublicKey;\n    pair: PublicKey;\n    payer?: PublicKey;\n    transaction?: Transaction;\n  }) {\n    const { tokenAddress, pair, payer, transaction } = params;\n\n    const tokenMint = new PublicKey(tokenAddress);\n    const tokenProgram = await getProgram(tokenMint, this.connection);\n\n    const associatedPairVault = spl.getAssociatedTokenAddressSync(\n      tokenMint,\n      pair,\n      true,\n      tokenProgram\n    );\n\n    if (transaction && payer) {\n      const infoPairVault =\n        await this.connection.getAccountInfo(associatedPairVault);\n\n      if (!infoPairVault) {\n        const pairVaultYInstructions =\n          spl.createAssociatedTokenAccountInstruction(\n            payer,\n            associatedPairVault,\n            pair,\n            tokenMint,\n            tokenProgram\n          );\n        transaction.add(pairVaultYInstructions);\n      }\n    }\n\n    return associatedPairVault;\n  }\n\n  public async getUserVaultInfo(params: GetUserVaultInfoParams) {\n    const { tokenAddress, payer, transaction } = params;\n    const tokenProgram = await getProgram(tokenAddress, this.connection);\n    const associatedUserVault = spl.getAssociatedTokenAddressSync(\n      tokenAddress,\n      payer,\n      true,\n      tokenProgram\n    );\n\n    if (transaction) {\n      const infoUserVault =\n        await this.connection.getAccountInfo(associatedUserVault);\n\n      if (!infoUserVault) {\n        const userVaultYInstructions =\n          spl.createAssociatedTokenAccountInstruction(\n            payer,\n            associatedUserVault,\n            payer,\n            tokenAddress,\n            tokenProgram\n          );\n        transaction.add(userVaultYInstructions);\n      }\n    }\n    return associatedUserVault;\n  }\n\n  public async listenNewPoolAddress(\n    postTxFunction: (address: string) => Promise<void>\n  ) {\n    const LB_PROGRAM_ID = this.getDexProgramId();\n    this.connection.onLogs(\n      LB_PROGRAM_ID,\n      (logInfo) => {\n        if (!logInfo.err) {\n          const logs = logInfo.logs || [];\n          for (const log of logs) {\n            if (log.includes(\"Instruction: InitializePair\")) {\n              const signature = logInfo.signature;\n\n              this.getPairAddressFromLogs(signature).then((address) => {\n                postTxFunction(address);\n              });\n            }\n          }\n        }\n      },\n      \"finalized\"\n    );\n  }\n\n  private async getPairAddressFromLogs(signature: string) {\n    const parsedTransaction = await this.connection.getTransaction(signature, {\n      maxSupportedTransactionVersion: 0,\n    });\n    if (!parsedTransaction) {\n      throw new Error(\"Transaction not found\");\n    }\n\n    const compiledMessage = parsedTransaction.transaction.message;\n    const message = TransactionMessage.decompile(compiledMessage);\n    const instructions = message.instructions;\n    const initializePairStruct = LiquidityBookIDL.instructions.find(\n      (item) => item.name === \"initialize_pair\"\n    )!;\n\n    const initializePairDescrimator = Buffer.from(\n      initializePairStruct!.discriminator\n    );\n\n    let pairAddress = \"\";\n\n    for (const instruction of instructions) {\n      const descimatorInstruction = instruction.data.subarray(0, 8);\n      if (!descimatorInstruction.equals(initializePairDescrimator)) continue;\n      //@ts-ignore\n      const accounts = initializePairStruct.accounts.map((item, index) => {\n        return {\n          name: item.name,\n          address: instruction.keys[index].pubkey.toString(),\n        };\n      });\n      pairAddress =\n        accounts.find(\n          (item: { name: string; address: string }) => item.name === \"pair\"\n        )?.address || \"\";\n    }\n    return pairAddress;\n  }\n}\n"],"names":["MODE","LiquidityShape","RemoveLiquidityType","CONFIG","_CONFIG","TESTNET","rpc","DEVNET","MAINNET","BASE_FACTOR","BIN_STEP","ACTIVE_ID","BIN_ARRAY_SIZE","BIN_ARRAY_INDEX","MAX_BASIS_POINTS","FILTER_PERIOD","DECAY_PERIOD","REDUCTION_FACTOR","VARIABLE_FEE_CONTROL","MAX_VOLATILITY_ACCUMULATOR","PROTOCOL_SHARE","START_TIME","REWARDS_DURATION","REWARDS_PER_SECOND","Math","floor","VARIABLE_FEE_PRECISION","SCALE_OFFSET","BASIS_POINT_MAX","ONE","PRECISION","UNIT_PRICE_DEFAULT","CCU_LIMIT","WRAP_SOL_ADDRESS","FIXED_LENGTH","BIN_STEP_CONFIGS","binStep","feeParameters","baseFactor","filterPeriod","decayPeriod","reductionFactor","variableFeeControl","maxVolatilityAccumulator","protocolShare","space","LiquidityBookAbstract","config","connection","Connection","_config$options","options","rpcUrl","mode","_config$options2","commitmentOrConfig","provider","AnchorProvider","defaultOptions","lbProgram","Program","LiquidityBookIDLDevnet","hooksProgram","MdmaIDLDevnet","LiquidityBookIDL","MdmaIDL","getProgram","_ref","_asyncToGenerator","_regenerator","m","_callee","address","_account$value","account","owner","program","w","_context","n","getParsedAccountInfo","v","value","toBase58","TOKEN_PROGRAM_ID","TOKEN_2022_PROGRAM_ID","a","_x","_x2","apply","arguments","getBase","quotient","basisPointMaxBigInt","fraction","oneBigInt","result","getPriceFromId","bin_step","bin_id","baseTokenDecimal","quoteTokenDecimal","base","exponent","decimalPow","pow","getIdFromPrice","price","Error","log","binId","round","LBError","_Error","message","_this","call","name","_inheritsLoose","_wrapNativeSuper","BinArrayRange","binArrayPrevious","binArrayCurrent","binArrayNext","index","BinArrayIndexMismatch","bins","addBins","binArray","forEach","bin","_this2","_proto","prototype","getBinMut","getAllBins","Object","values","LBSwapService","volatilityAccumulator","volatilityReference","referenceId","timeLastUpdated","fromLbConfig","_proto2","getBinArray","params","binArrayIndex","pair","PublicKey","findProgramAddressSync","Buffer","from","utils","bytes","utf8","encode","toBuffer","BN","toArrayLike","programId","calculateInOutAmount","_calculateInOutAmount","_this3","amount","swapForY","isExactInput","pairInfo","currentBinArrayIndex","binArrayIndexes","binArrayAddresses","binArrays","binRange","totalSupply","amountAfterTransferFee","amountOut","amountIn","_t","p","fetch","activeId","map","idx","Promise","all","i","error","reduce","acc","cur","add","isZero","BigInt","calculateAmountOut","calculateAmountIn","_calculateAmountIn","_callee2","totalProtocolFee","amountOutLeft","totalBinUsed","activeBin","fee","_this$swapExactOutput","amountInWithFees","amountOutOfBin","protocolFeeAmount","_t2","_context2","updateReferences","updateVolatilityAccumulator","getTotalFee","swapExactOutput","staticFeeParameters","reserveX","reserveY","moveActiveId","_x3","_x4","_x5","_calculateAmountOut","_callee3","amountInLeft","_this$swapExactInput","_t3","_context3","swapExactInput","_x6","_x7","_x8","_x9","protocolShareBigInt","binReserveOut","feeAmount","binReserveOutBigInt","toString","priceScaled","Number","amountInWithoutFee","calcAmountInByPrice","getFeeForAmount","getProtocolFee","maxAmountIn","maxFeeAmount","getFeeAmount","calcAmountOutByPrice","_updateReferences","_callee4","slot","blockTimeStamp","timeDelta","_context4","dynamicFeeParameters","idReference","toNumber","getSlot","getBlockTime","updateVolatilityReference","_x0","_x1","deltaId","abs","getVariableFee","prod","variableFee","getBaseFee","denominator","feeForAmount","protocolFee","pairId","scaleOffset","rounding","divRem","numerator","remainder","mulDiv","x","y","_divRem","mulShr","offset","shlDiv","scale","getCurveDistributionFromBinRange","deltaIds","_distributionX","_distributionY","getSigma","_R","factor","negDelta","negativeDeltaIds","Array","keys","reverse","slice","el","concat","push","length","fill","R","sigma","A","sqrt","PI","_","ind","exp","posDelta","positiveDeltaIds","unshift","RX","sigmaX","AX","RY","sigmaY","AY","liquidityDistributionX","liquidityDistributionY","totalX","val","totalY","isOverflow","overPoint","numberBins","filter","remainderLeft","reverseLiquid","_divRem2","liquidityDistribution","relativeBinId","distributionX","distributionY","createUniformDistribution","shape","minBin","maxBin","relativeIds","Spot","totalArrayLength","findActiveBinIndex","findIndex","item","isOnlyX","isOnlyY","distribution","totalYBin","totalXBin","pricePerBin","Curve","BidAsk","rSquare","rSquareX","rSquareY","_divRem3","_divRem4","getMaxPosition","range","leftRangeIndex","rangeFromIndex","positions","getMaxBinArray","arrayIndex","binIndex","binArrayIndexLen","binArrayList","binArrayLowerIndex","binArrayUpperIndex","getBinRange","firstBinId","firstArray","binLower","binUpper","findPosition","position","_getBinRange","lowerBinId","upperBinId","getGasPrice","buffNum","_ref2","resolve","timeout","getPriority","currentFee","unitPrice","setTimeout","getRecentPrioritizationFees","prioritizationFee","clearTimeout","max","LiquidityBookServices","_LiquidityBookAbstrac","getPairAccount","_getPairAccount","getPositionAccount","_getPositionAccount","_getBinArray","payer","transaction","binArrayInfo","initializebinArrayConfigTx","getAccountInfo","methods","initializeBinArray","accountsPartial","user","instruction","getBinArrayInfo","_getBinArrayInfo","resultIndex","_yield$this$lbProgram","binArrayOther","res","_binArrayOther","_res","getBinsReserveInformation","_getBinsReserveInformation","_callee5","positionInfo","_yield$this$getBinArr","firstBinIndex","binIds","reserveXY","_context5","liquidityShare","liquidityShares","totalReserveX","totalReserveY","binPosistion","createPairWithConfig","_createPairWithConfig","_callee6","tokenBase","tokenQuote","ratePrice","tokenX","tokenY","id","tx","binStepConfig","quoteAssetBadge","initializePairConfigTx","binArrayLower","binArrayUpper","initializeBinArrayLowerConfigTx","initializeBinArrayUpperConfigTx","_context6","mintAddress","decimal","Transaction","lbConfig","Uint8Array","initializePair","liquidityBookConfig","tokenMintX","tokenMintY","hooksConfig","createPosition","_createPosition","_callee7","relativeBinIdLeft","relativeBinIdRight","positionMint","positionVault","initializePositionTx","_context7","spl","positionTokenAccount","tokenProgram","addLiquidityIntoPosition","_addLiquidityIntoPosition","_callee8","_Number","_this$bufferGas","amountX","amountY","tokenProgramX","tokenProgramY","associatedPairVaultX","associatedPairVaultY","associatedUserVaultX","associatedUserVaultY","isNativeY","totalAmount","totalLiquid","associatedUserVault","unitSPrice","hook","addLiquidityInstructions","_context8","getPairVaultInfo","tokenAddress","getUserVaultInfo","prev","curr","currAmount","SystemProgram","transfer","fromPubkey","toPubkey","lamports","undefined","bufferGas","increasePosition","tokenVaultX","tokenVaultY","userVaultX","userVaultY","positionTokenProgram","remainingAccounts","pubkey","isWritable","isSigner","ComputeBudgetProgram","setComputeUnitLimit","units","setComputeUnitPrice","microLamports","removeMultipleLiquidity","_removeMultipleLiquidity","_callee0","_Number2","_this$bufferGas2","maxPositionList","type","txCreateAccount","associatedHookTokenY","infoHookTokenY","hookTokenYInstructions","positionClosed","txs","txCloseAccount","_context0","_callee9","start","end","_yield$_this$getBinAr","hookBinArrayLower","hookBinArrayUpper","hookPosition","removedShares","availableShares","isClosePosition","instructions","_this$lbProgram$metho","_instructions","_context9","cloneDeep","reserve","eq","closePosition","decreasePosition","swap","_swap","_callee10","otherAmountOffset","surroundingIndexes","binArrayAccountsInfo","validIndexes","activeOffset","first","second","third","_ref4","_yield$Promise$all","latestBlockHash","infoUserVaultX","userVaultXInstructions","infoUserVaultY","userVaultYInstructions","swapInstructions","_isNativeY","_associatedUserVault","_context10","_ref3","_callee1","_context1","_x10","getMultipleAccountsInfo","getLatestBlockhash","feePayer","blockhash","lastValidBlockHeight","exactInput","exactOutput","getQuote","_getQuote","_callee11","data","slippageFraction","slippageScaled","minAmountOut","_yield$this$getMaxAmo","maxAmountOut","priceImpact","_t4","_context11","slippage","getMaxAmountOutWithFee","tokenBaseDecimal","tokenQuoteDecimal","bigDecimal","subtract","divide","multiply","getValue","_x11","_getMaxAmountOutWithFee","_callee12","pairAddress","decimalBase","decimalQuote","_context12","swapService","feePrice","activePrice","_x12","_x13","_x14","_x15","_x16","getDexName","getDexProgramId","fetchPoolAddresses","_fetchPoolAddresses","_callee13","pairAccount","pairAccountDiscriminator","accounts","poolAdresses","_context13","find","discriminator","getProgramAccounts","filters","memcmp","bs58","addresses","getUserPositions","_getUserPositions","_callee15","_ref5","tokenAccounts","positionMints","_context15","getParsedTokenAccountsByOwner","parsed","info","tokenAmount","uiAmount","mint","_ref6","_callee14","_yield$PublicKey$find","positionPda","accountInfo","_context14","_extends","_x18","Boolean","_x17","quote","_quote","_callee16","metadata","optional","_context16","poolAddress","baseMint","extra","quoteMint","_x19","fetchPoolMetadata","_fetchPoolMetadata","_callee17","_pairInfo$hook","basePairVault","quotePairVault","_yield$Promise$all2","baseReserve","quoteReserve","_context17","getTokenAccountBalance","decimals","uiAmountString","tradeFee","_x20","_getPairVaultInfo","_callee18","tokenMint","associatedPairVault","infoPairVault","pairVaultYInstructions","_context18","_x21","_getUserVaultInfo","_callee19","infoUserVault","_context19","_x22","listenNewPoolAddress","_listenNewPoolAddress","_callee20","postTxFunction","_this4","LB_PROGRAM_ID","_context20","onLogs","logInfo","err","logs","_iterator","_createForOfIteratorHelperLoose","_step","done","includes","signature","getPairAddressFromLogs","then","_x23","_getPairAddressFromLogs","_callee21","parsedTransaction","compiledMessage","initializePairStruct","initializePairDescrimator","_loop","_iterator2","_step2","_context22","getTransaction","maxSupportedTransactionVersion","TransactionMessage","decompile","_accounts$find","descimatorInstruction","_context21","subarray","equals","d","_regeneratorValues","_x24","_createClass","key","get"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGYA;AAAZ,WAAYA,IAAI;EACdA,2BAAmB;EACnBA,yBAAiB;EACjBA,2BAAmB;AACrB,CAAC,EAJWA,IAAI,KAAJA,IAAI;;ICAJC,cAIX;AAJD,WAAYA,cAAc;EACxBA,+BAAa;EACbA,iCAAe;EACfA,mCAAiB;AACnB,CAAC,EAJWA,cAAc,KAAdA,cAAc;AAM1B,IAAYC,mBAIX;AAJD,WAAYA,mBAAmB;EAC7BA,0CAAmB;EACnBA,oDAA6B;EAC7BA,sDAA+B;AACjC,CAAC,EAJWA,mBAAmB,KAAnBA,mBAAmB;;;ACT/B,IAEaC,MAAM,IAAAC,OAAA,OAAAA,OAAA,CAChBJ,IAAI,CAACK,OAAO,IAAG;EACdC,GAAG,EAAE;CACN,EAAAF,OAAA,CACAJ,IAAI,CAACO,MAAM,IAAG;EACbD,GAAG,EAAE;CACN,EAAAF,OAAA,CACAJ,IAAI,CAACQ,OAAO,IAAG;EACdF,GAAG,EAAE;CACN,EAAAF,OAAA,CACF;AAED,IAAaK,WAAW,GAAG,IAAK;AAChC,IAAaC,QAAQ,GAAG,CAAC;AACzB,IAAaC,SAAS,GAAG,OAAO;AAChC,IAAaC,cAAc,GAAG,GAAG;AACjC,IAAaC,eAAe,GAAGF,SAAS,GAAGC,cAAc,GAAG,CAAC;AAC7D,IAAaE,gBAAgB,GAAG,KAAM;AACtC,IAAaC,aAAa,GAAG,EAAE;AAC/B,IAAaC,YAAY,GAAG,GAAG;AAC/B,IAAaC,gBAAgB,GAAG,IAAK;AACrC,IAAaC,oBAAoB,GAAG,KAAM;AAC1C,IAAaC,0BAA0B,GAAG,MAAO;AACjD,IAAaC,cAAc,GAAG,IAAI;AAClC,IAAaC,UAAU,GAAG,IAAI;AAC9B,IAAaC,gBAAgB,GAAG,EAAE,GAAG,IAAI;AACzC,IAAaC,kBAAkB,gBAAGC,IAAI,CAACC,KAAK,CAAC,KAAK,GAAGH,gBAAgB,CAAC;AACtE,IAAaI,sBAAsB,GAAG,YAAe;AACrD,IAAaC,YAAY,GAAG,EAAE;AAC9B,IAAaC,eAAe,GAAG,KAAM;AACrC,IAAaC,GAAG,GAAG,CAAC,IAAIF,YAAY;AACpC,IAAaG,SAAS,GAAG,UAAa;AAEtC,IAAaC,kBAAkB,GAAG,OAAS;AAC3C,IAAaC,SAAS,GAAG,MAAO;AAChC,IAAaC,gBAAgB,GAAG,6CAA6C;AAC7E,IAAaC,YAAY,GAAG,EAAE;AAE9B,IAAaC,gBAAgB,GAAG,CAC9B;EACEC,OAAO,EAAE,CAAC;EACVC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,EAAE;IAChBC,WAAW,EAAE,GAAG;IAChBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,OAAO;IAC3BC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,CAAC;EACVC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,EAAE;IAChBC,WAAW,EAAE,GAAG;IAChBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,MAAM;IAC1BC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,CAAC;EACVC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,EAAE;IAChBC,WAAW,EAAE,GAAG;IAChBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,MAAM;IAC1BC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,EAAE;EACXC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,EAAE;IAChBC,WAAW,EAAE,GAAG;IAChBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,KAAK;IACzBC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,EAAE;EACXC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,EAAE;IAChBC,WAAW,EAAE,GAAG;IAChBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,KAAK;IACzBC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,EAAE;EACXC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,GAAG;IACjBC,WAAW,EAAE,IAAI;IACjBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,KAAK;IACzBC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,GAAG;EACZC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,GAAG;IACjBC,WAAW,EAAE,IAAI;IACjBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,IAAI;IACxBC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,GAAG;EACZC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,GAAG;IACjBC,WAAW,EAAE,IAAI;IACjBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,IAAI;IACxBC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,EACD;EACET,OAAO,EAAE,GAAG;EACZC,aAAa,EAAE;IACbC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE,GAAG;IACjBC,WAAW,EAAE,IAAI;IACjBC,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE,IAAI;IACxBC,wBAAwB,EAAE,MAAM;IAChCC,aAAa,EAAE,IAAI;IACnBC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEf,CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}