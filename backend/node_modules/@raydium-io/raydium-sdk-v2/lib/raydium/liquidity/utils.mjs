var sn=Object.defineProperty,an=Object.defineProperties;var un=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var xt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var Tt=(e,t,n)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))xt.call(t,n)&&Tt(e,n,t[n]);if(_e)for(var n of _e(t))Pt.call(t,n)&&Tt(e,n,t[n]);return e},re=(e,t)=>an(e,un(t));var ze=(e,t)=>{var n={};for(var r in e)xt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_e)for(var r of _e(e))t.indexOf(r)<0&&Pt.call(e,r)&&(n[r]=e[r]);return n};import{PublicKey as Se}from"@solana/web3.js";import Ae from"bn.js";var me=9e15,ae=1e9,je="0123456789abcdef",Re="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Me="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ze={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-me,maxE:me,crypto:!1},It,Q,T=!0,De="[DecimalError] ",se=De+"Invalid argument: ",Bt=De+"Precision limit exceeded",Lt=De+"crypto unavailable",Nt="[object Decimal]",V=Math.floor,R=Math.pow,cn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ln=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,mn=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,_t=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,H=1e7,y=7,pn=9007199254740991,fn=Re.length-1,Qe=Me.length-1,f={toStringTag:Nt};f.absoluteValue=f.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),b(e)};f.ceil=function(){return b(new this.constructor(this),this.e+1,2)};f.clampedTo=f.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(se+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};f.comparedTo=f.cmp=function(e){var t,n,r,i,o=this,s=o.d,a=(e=new o.constructor(e)).d,c=o.s,u=e.s;if(!s||!a)return!c||!u?NaN:c!==u?c:s===a?0:!s^c<0?1:-1;if(!s[0]||!a[0])return s[0]?c:a[0]?-u:0;if(c!==u)return c;if(o.e!==e.e)return o.e>e.e^c<0?1:-1;for(r=s.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};f.cosine=f.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+y,r.rounding=1,n=dn(r,Dt(r,n)),r.precision=e,r.rounding=t,b(Q==2||Q==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};f.cubeRoot=f.cbrt=function(){var e,t,n,r,i,o,s,a,c,u,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(T=!1,o=l.s*R(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=D(l.d),e=l.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=R(n,1/3),e=V((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new m(n),r.s=l.s):r=new m(o.toString()),s=(e=m.precision)+3;;)if(a=r,c=a.times(a).times(a),u=c.plus(l),r=B(u.plus(l).times(a),u.plus(c),s+2,1),D(a.d).slice(0,s)===(n=D(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(b(a,e+1,0),a.times(a).times(a).eq(l))){r=a;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(b(r,e+1,1),t=!r.times(r).times(r).eq(l));break}return T=!0,b(r,e,m.rounding,t)};f.decimalPlaces=f.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-V(this.e/y))*y,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};f.dividedBy=f.div=function(e){return B(this,new this.constructor(e))};f.dividedToIntegerBy=f.divToInt=function(e){var t=this,n=t.constructor;return b(B(t,new n(e),0,1,1),n.precision,n.rounding)};f.equals=f.eq=function(e){return this.cmp(e)===0};f.floor=function(){return b(new this.constructor(this),this.e+1,3)};f.greaterThan=f.gt=function(e){return this.cmp(e)>0};f.greaterThanOrEqualTo=f.gte=function(e){var t=this.cmp(e);return t==1||t===0};f.hyperbolicCosine=f.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),t=(1/Oe(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=pe(s,1,o.times(t),new s(1),!0);for(var c,u=e,l=new s(8);u--;)c=o.times(o),o=a.minus(c.times(l.minus(c.times(l))));return b(o,s.precision=n,s.rounding=r,!0)};f.hyperbolicSine=f.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=pe(o,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/Oe(5,e)),i=pe(o,2,i,i,!0);for(var s,a=new o(5),c=new o(16),u=new o(20);e--;)s=i.times(i),i=i.times(a.plus(s.times(c.times(s).plus(u))))}return o.precision=t,o.rounding=n,b(i,t,n,!0)};f.hyperbolicTangent=f.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,B(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};f.inverseCosine=f.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return r!==-1?r===0?t.isNeg()?G(n,i,o):new n(0):new n(NaN):t.isZero()?G(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=G(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))};f.inverseHyperbolicCosine=f.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,T=!1,n=n.times(n).minus(1).sqrt().plus(n),T=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};f.inverseHyperbolicSine=f.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,T=!1,n=n.times(n).plus(1).sqrt().plus(n),T=!0,r.precision=e,r.rounding=t,n.ln())};f.inverseHyperbolicTangent=f.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?b(new o(i),e,t,!0):(o.precision=n=r-i.e,i=B(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)};f.inverseSine=f.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,t!==-1?t===0?(e=G(o,n+4,r).times(.5),e.s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))};f.inverseTangent=f.atan=function(){var e,t,n,r,i,o,s,a,c,u=this,l=u.constructor,m=l.precision,p=l.rounding;if(u.isFinite()){if(u.isZero())return new l(u);if(u.abs().eq(1)&&m+4<=Qe)return s=G(l,m+4,p).times(.25),s.s=u.s,s}else{if(!u.s)return new l(NaN);if(m+4<=Qe)return s=G(l,m+4,p).times(.5),s.s=u.s,s}for(l.precision=a=m+10,l.rounding=1,n=Math.min(28,a/y+2|0),e=n;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(T=!1,t=Math.ceil(a/y),r=1,c=u.times(u),s=new l(u),i=u;e!==-1;)if(i=i.times(c),o=s.minus(i.div(r+=2)),i=i.times(c),s=o.plus(i.div(r+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),T=!0,b(s,l.precision=m,l.rounding=p,!0)};f.isFinite=function(){return!!this.d};f.isInteger=f.isInt=function(){return!!this.d&&V(this.e/y)>this.d.length-2};f.isNaN=function(){return!this.s};f.isNegative=f.isNeg=function(){return this.s<0};f.isPositive=f.isPos=function(){return this.s>0};f.isZero=function(){return!!this.d&&this.d[0]===0};f.lessThan=f.lt=function(e){return this.cmp(e)<0};f.lessThanOrEqualTo=f.lte=function(e){return this.cmp(e)<1};f.logarithm=f.log=function(e){var t,n,r,i,o,s,a,c,u=this,l=u.constructor,m=l.precision,p=l.rounding,g=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new l(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10===0;)i/=10;o=i!==1}if(T=!1,a=m+g,s=oe(u,a),r=t?Ee(l,a+10):oe(e,a),c=B(s,r,a,1),be(c.d,i=m,p))do if(a+=10,s=oe(u,a),r=t?Ee(l,a+10):oe(e,a),c=B(s,r,a,1),!o){+D(c.d).slice(i+1,i+15)+1==1e14&&(c=b(c,m+1,0));break}while(be(c.d,i+=10,p));return T=!0,b(c,m,p)};f.minus=f.sub=function(e){var t,n,r,i,o,s,a,c,u,l,m,p,g=this,k=g.constructor;if(e=new k(e),!g.d||!e.d)return!g.s||!e.s?e=new k(NaN):g.d?e.s=-e.s:e=new k(e.d||g.s!==e.s?g:NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(u=g.d,p=e.d,a=k.precision,c=k.rounding,!u[0]||!p[0]){if(p[0])e.s=-e.s;else if(u[0])e=new k(g);else return new k(c===3?-0:0);return T?b(e,a,c):e}if(n=V(e.e/y),l=V(g.e/y),u=u.slice(),o=l-n,o){for(m=o<0,m?(t=u,o=-o,s=p.length):(t=p,n=l,s=u.length),r=Math.max(Math.ceil(a/y),s)+2,o>r&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for(r=u.length,s=p.length,m=r<s,m&&(s=r),r=0;r<s;r++)if(u[r]!=p[r]){m=u[r]<p[r];break}o=0}for(m&&(t=u,u=p,p=t,e.s=-e.s),s=u.length,r=p.length-s;r>0;--r)u[s++]=0;for(r=p.length;r>o;){if(u[--r]<p[r]){for(i=r;i&&u[--i]===0;)u[i]=H-1;--u[i],u[r]+=H}u[r]-=p[r]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=ve(u,n),T?b(e,a,c):e):new k(c===3?-0:0)};f.modulo=f.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?b(new r(n),r.precision,r.rounding):(T=!1,r.modulo==9?(t=B(n,e.abs(),0,3,1),t.s*=e.s):t=B(n,e,0,r.modulo,1),t=t.times(e),T=!0,n.minus(t))};f.naturalExponential=f.exp=function(){return Je(this)};f.naturalLogarithm=f.ln=function(){return oe(this)};f.negated=f.neg=function(){var e=new this.constructor(this);return e.s=-e.s,b(e)};f.plus=f.add=function(e){var t,n,r,i,o,s,a,c,u,l,m=this,p=m.constructor;if(e=new p(e),!m.d||!e.d)return!m.s||!e.s?e=new p(NaN):m.d||(e=new p(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(u=m.d,l=e.d,a=p.precision,c=p.rounding,!u[0]||!l[0])return l[0]||(e=new p(m)),T?b(e,a,c):e;if(o=V(m.e/y),r=V(e.e/y),u=u.slice(),i=o-r,i){for(i<0?(n=u,i=-i,s=l.length):(n=l,r=o,s=u.length),o=Math.ceil(a/y),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=u.length,i=l.length,s-i<0&&(i=s,n=l,l=u,u=n),t=0;i;)t=(u[--i]=u[i]+l[i]+t)/H|0,u[i]%=H;for(t&&(u.unshift(t),++r),s=u.length;u[--s]==0;)u.pop();return e.d=u,e.e=ve(u,r),T?b(e,a,c):e};f.precision=f.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(se+e);return n.d?(t=Ct(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};f.round=function(){var e=this,t=e.constructor;return b(new t(e),e.e+1,t.rounding)};f.sine=f.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+y,r.rounding=1,n=bn(r,Dt(r,n)),r.precision=e,r.rounding=t,b(Q>2?n.neg():n,e,t,!0)):new r(NaN)};f.squareRoot=f.sqrt=function(){var e,t,n,r,i,o,s=this,a=s.d,c=s.e,u=s.s,l=s.constructor;if(u!==1||!a||!a[0])return new l(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);for(T=!1,u=Math.sqrt(+s),u==0||u==1/0?(t=D(a),(t.length+c)%2==0&&(t+="0"),u=Math.sqrt(t),c=V((c+1)/2)-(c<0||c%2),u==1/0?t="5e"+c:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),r=new l(t)):r=new l(u.toString()),n=(c=l.precision)+3;;)if(o=r,r=o.plus(B(s,o,n+2,1)).times(.5),D(o.d).slice(0,n)===(t=D(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(b(o,c+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(b(r,c+1,1),e=!r.times(r).eq(s));break}return T=!0,b(r,c,l.rounding,e)};f.tangent=f.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=B(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,b(Q==2||Q==4?n.neg():n,e,t,!0)):new r(NaN)};f.times=f.mul=function(e){var t,n,r,i,o,s,a,c,u,l=this,m=l.constructor,p=l.d,g=(e=new m(e)).d;if(e.s*=l.s,!p||!p[0]||!g||!g[0])return new m(!e.s||p&&!p[0]&&!g||g&&!g[0]&&!p?NaN:!p||!g?e.s/0:e.s*0);for(n=V(l.e/y)+V(e.e/y),c=p.length,u=g.length,c<u&&(o=p,p=g,g=o,s=c,c=u,u=s),o=[],s=c+u,r=s;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)a=o[i]+g[r]*p[i-r-1]+t,o[i--]=a%H|0,t=a/H|0;o[i]=(o[i]+t)%H|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=ve(o,n),T?b(e,m.precision,m.rounding):e};f.toBinary=function(e,t){return $e(this,2,e,t)};f.toDecimalPlaces=f.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(W(e,0,ae),t===void 0?t=r.rounding:W(t,0,8),b(n,e+n.e+1,t))};f.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=j(r,!0):(W(e,0,ae),t===void 0?t=i.rounding:W(t,0,8),r=b(new i(r),e+1,t),n=j(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?n=j(i):(W(e,0,ae),t===void 0?t=o.rounding:W(t,0,8),r=b(new o(i),e+i.e+1,t),n=j(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};f.toFraction=function(e){var t,n,r,i,o,s,a,c,u,l,m,p,g=this,k=g.d,w=g.constructor;if(!k)return new w(g);if(u=n=new w(1),r=c=new w(0),t=new w(r),o=t.e=Ct(k)-g.e-1,s=o%y,t.d[0]=R(10,s<0?y+s:s),e==null)e=o>0?t:u;else{if(a=new w(e),!a.isInt()||a.lt(u))throw Error(se+a);e=a.gt(t)?o>0?t:u:a}for(T=!1,a=new w(D(k)),l=w.precision,w.precision=o=k.length*y*2;m=B(a,t,0,1,1),i=n.plus(m.times(r)),i.cmp(e)!=1;)n=r,r=i,i=u,u=c.plus(m.times(i)),c=i,i=t,t=a.minus(m.times(i)),a=i;return i=B(e.minus(n),r,0,1,1),c=c.plus(i.times(u)),n=n.plus(i.times(r)),c.s=u.s=g.s,p=B(u,r,o,1).minus(g).abs().cmp(B(c,n,o,1).minus(g).abs())<1?[u,r]:[c,n],w.precision=l,T=!0,p};f.toHexadecimal=f.toHex=function(e,t){return $e(this,16,e,t)};f.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:W(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(T=!1,n=B(n,e,0,t,1).times(e),T=!0,b(n)):(e.s=n.s,n=e),n};f.toNumber=function(){return+this};f.toOctal=function(e,t){return $e(this,8,e,t)};f.toPower=f.pow=function(e){var t,n,r,i,o,s,a=this,c=a.constructor,u=+(e=new c(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new c(R(+a,u));if(a=new c(a),a.eq(1))return a;if(r=c.precision,o=c.rounding,e.eq(1))return b(a,r,o);if(t=V(e.e/y),t>=e.d.length-1&&(n=u<0?-u:u)<=pn)return i=Rt(c,a,n,r),e.s<0?new c(1).div(i):b(i,r,o);if(s=a.s,s<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=R(+a,u),t=n==0||!isFinite(n)?V(u*(Math.log("0."+D(a.d))/Math.LN10+a.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?s/0:0):(T=!1,c.rounding=a.s=1,n=Math.min(12,(t+"").length),i=Je(e.times(oe(a,r+n)),r),i.d&&(i=b(i,r+5,1),be(i.d,r,o)&&(t=r+10,i=b(Je(e.times(oe(a,t+n)),t),t+5,1),+D(i.d).slice(r+1,r+15)+1==1e14&&(i=b(i,r+1,0)))),i.s=s,T=!0,c.rounding=o,b(i,r,o))};f.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=j(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(W(e,1,ae),t===void 0?t=i.rounding:W(t,0,8),r=b(new i(r),e,t),n=j(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toSignificantDigits=f.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(W(e,1,ae),t===void 0?t=r.rounding:W(t,0,8)),b(new r(n),e,t)};f.toString=function(){var e=this,t=e.constructor,n=j(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};f.truncated=f.trunc=function(){return b(new this.constructor(this),this.e+1,1)};f.valueOf=f.toJSON=function(){var e=this,t=e.constructor,n=j(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function D(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",n=y-r.length,n&&(o+=ie(n)),o+=r;s=e[t],r=s+"",n=y-r.length,n&&(o+=ie(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function W(e,t,n){if(e!==~~e||e<t||e>n)throw Error(se+e)}function be(e,t,n,r){var i,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=y,i=0):(i=Math.ceil((t+1)/y),t%=y),o=R(10,y-t),a=e[i]%o|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[i+1]/o/100|0)==R(10,t-2)-1||(a==o/2||a==0)&&(e[i+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(r||n<4)&&a==9999||!r&&n>3&&a==4999):s=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(e[i+1]/o/1e3|0)==R(10,t-3)-1,s}function Ce(e,t,n){for(var r,i=[0],o,s=0,a=e.length;s<a;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=je.indexOf(e.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function dn(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/Oe(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=pe(e,1,t.times(i),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var B=function(){function e(r,i,o){var s,a=0,c=r.length;for(r=r.slice();c--;)s=r[c]*i+a,r[c]=s%o|0,a=s/o|0;return a&&r.unshift(a),r}function t(r,i,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(r[a]!=i[a]){c=r[a]>i[a]?1:-1;break}return c}function n(r,i,o,s){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,a,c){var u,l,m,p,g,k,w,C,I,O,S,K,Ie,Z,Ge,Be,ge,He,U,Le,Ne=r.constructor,Ye=r.s==i.s?1:-1,F=r.d,L=i.d;if(!F||!F[0]||!L||!L[0])return new Ne(!r.s||!i.s||(F?L&&F[0]==L[0]:!L)?NaN:F&&F[0]==0||!L?Ye*0:Ye/0);for(c?(g=1,l=r.e-i.e):(c=H,g=y,l=V(r.e/g)-V(i.e/g)),U=L.length,ge=F.length,I=new Ne(Ye),O=I.d=[],m=0;L[m]==(F[m]||0);m++);if(L[m]>(F[m]||0)&&l--,o==null?(Z=o=Ne.precision,s=Ne.rounding):a?Z=o+(r.e-i.e)+1:Z=o,Z<0)O.push(1),k=!0;else{if(Z=Z/g+2|0,m=0,U==1){for(p=0,L=L[0],Z++;(m<ge||p)&&Z--;m++)Ge=p*c+(F[m]||0),O[m]=Ge/L|0,p=Ge%L|0;k=p||m<ge}else{for(p=c/(L[0]+1)|0,p>1&&(L=e(L,p,c),F=e(F,p,c),U=L.length,ge=F.length),Be=U,S=F.slice(0,U),K=S.length;K<U;)S[K++]=0;Le=L.slice(),Le.unshift(0),He=L[0],L[1]>=c/2&&++He;do p=0,u=t(L,S,U,K),u<0?(Ie=S[0],U!=K&&(Ie=Ie*c+(S[1]||0)),p=Ie/He|0,p>1?(p>=c&&(p=c-1),w=e(L,p,c),C=w.length,K=S.length,u=t(w,S,C,K),u==1&&(p--,n(w,U<C?Le:L,C,c))):(p==0&&(u=p=1),w=L.slice()),C=w.length,C<K&&w.unshift(0),n(S,w,K,c),u==-1&&(K=S.length,u=t(L,S,U,K),u<1&&(p++,n(S,U<K?Le:L,K,c))),K=S.length):u===0&&(p++,S=[0]),O[m++]=p,u&&S[0]?S[K++]=F[Be]||0:(S=[F[Be]],K=1);while((Be++<ge||S[0]!==void 0)&&Z--);k=S[0]!==void 0}O[0]||O.shift()}if(g==1)I.e=l,It=k;else{for(m=1,p=O[0];p>=10;p/=10)m++;I.e=m+l*g-1,b(I,a?o+I.e+1:o,s,k)}return I}}();function b(e,t,n,r){var i,o,s,a,c,u,l,m,p,g=e.constructor;e:if(t!=null){if(m=e.d,!m)return e;for(i=1,a=m[0];a>=10;a/=10)i++;if(o=t-i,o<0)o+=y,s=t,l=m[p=0],c=l/R(10,i-s-1)%10|0;else if(p=Math.ceil((o+1)/y),a=m.length,p>=a)if(r){for(;a++<=p;)m.push(0);l=c=0,i=1,o%=y,s=o-y+1}else break e;else{for(l=a=m[p],i=1;a>=10;a/=10)i++;o%=y,s=o-y+i,c=s<0?0:l/R(10,i-s-1)%10|0}if(r=r||t<0||m[p+1]!==void 0||(s<0?l:l%R(10,i-s-1)),u=n<4?(c||r)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||r||n==6&&(o>0?s>0?l/R(10,i-s):0:m[p-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,u?(t-=e.e+1,m[0]=R(10,(y-t%y)%y),e.e=-t||0):m[0]=e.e=0,e;if(o==0?(m.length=p,a=1,p--):(m.length=p+1,a=R(10,y-o),m[p]=s>0?(l/R(10,i-s)%R(10,s)|0)*a:0),u)for(;;)if(p==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,m[0]==H&&(m[0]=1));break}else{if(m[p]+=a,m[p]!=H)break;m[p--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return T&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function j(e,t,n){if(!e.isFinite())return Et(e);var r,i=e.e,o=D(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+ie(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+ie(-i-1)+o,n&&(r=n-s)>0&&(o+=ie(r))):i>=s?(o+=ie(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+ie(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=ie(r))),o}function ve(e,t){var n=e[0];for(t*=y;n>=10;n/=10)t++;return t}function Ee(e,t,n){if(t>fn)throw T=!0,n&&(e.precision=n),Error(Bt);return b(new e(Re),t,1,!0)}function G(e,t,n){if(t>Qe)throw Error(Bt);return b(new e(Me),t,n,!0)}function Ct(e){var t=e.length-1,n=t*y+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function ie(e){for(var t="";e--;)t+="0";return t}function Rt(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/y+4);for(T=!1;;){if(n%2&&(o=o.times(t),At(o.d,s)&&(i=!0)),n=V(n/2),n===0){n=o.d.length-1,i&&o.d[n]===0&&++o.d[n];break}t=t.times(t),At(t.d,s)}return T=!0,o}function kt(e){return e.d[e.d.length-1]&1}function Mt(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;)if(r=new e(t[o]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function Je(e,t){var n,r,i,o,s,a,c,u=0,l=0,m=0,p=e.constructor,g=p.rounding,k=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(T=!1,c=k):c=t,a=new p(.03125);e.e>-2;)e=e.times(a),m+=5;for(r=Math.log(R(2,m))/Math.LN10*2+5|0,c+=r,n=o=s=new p(1),p.precision=c;;){if(o=b(o.times(e),c,1),n=n.times(++l),a=s.plus(B(o,n,c,1)),D(a.d).slice(0,c)===D(s.d).slice(0,c)){for(i=m;i--;)s=b(s.times(s),c,1);if(t==null)if(u<3&&be(s.d,c-r,g,u))p.precision=c+=10,n=o=a=new p(1),l=0,u++;else return b(s,p.precision=k,g,T=!0);else return p.precision=k,s}s=a}}function oe(e,t){var n,r,i,o,s,a,c,u,l,m,p,g=1,k=10,w=e,C=w.d,I=w.constructor,O=I.rounding,S=I.precision;if(w.s<0||!C||!C[0]||!w.e&&C[0]==1&&C.length==1)return new I(C&&!C[0]?-1/0:w.s!=1?NaN:C?0:w);if(t==null?(T=!1,l=S):l=t,I.precision=l+=k,n=D(C),r=n.charAt(0),Math.abs(o=w.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(e),n=D(w.d),r=n.charAt(0),g++;o=w.e,r>1?(w=new I("0."+n),o++):w=new I(r+"."+n.slice(1))}else return u=Ee(I,l+2,S).times(o+""),w=oe(new I(r+"."+n.slice(1)),l-k).plus(u),I.precision=S,t==null?b(w,S,O,T=!0):w;for(m=w,c=s=w=B(w.minus(1),w.plus(1),l,1),p=b(w.times(w),l,1),i=3;;){if(s=b(s.times(p),l,1),u=c.plus(B(s,new I(i),l,1)),D(u.d).slice(0,l)===D(c.d).slice(0,l))if(c=c.times(2),o!==0&&(c=c.plus(Ee(I,l+2,S).times(o+""))),c=B(c,new I(g),l,1),t==null)if(be(c.d,l-k,O,a))I.precision=l+=k,u=s=w=B(m.minus(1),m.plus(1),l,1),p=b(w.times(w),l,1),i=a=1;else return b(c,I.precision=S,O,T=!0);else return I.precision=S,c;c=u,i+=2}}function Et(e){return String(e.s*e.s/0)}function Xe(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%y,n<0&&(r+=y),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=y;r<i;)e.d.push(+t.slice(r,r+=y));t=t.slice(r),r=y-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),T&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function gn(e,t){var n,r,i,o,s,a,c,u,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),_t.test(t))return Xe(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(ln.test(t))n=16,t=t.toLowerCase();else if(cn.test(t))n=2;else if(mn.test(t))n=8;else throw Error(se+t);for(o=t.search(/p/i),o>0?(c=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,r=e.constructor,s&&(t=t.replace(".",""),a=t.length,o=a-o,i=Rt(r,new r(n),o,o*2)),u=Ce(t,n,H),l=u.length-1,o=l;u[o]===0;--o)u.pop();return o<0?new r(e.s*0):(e.e=ve(u,l),e.d=u,T=!1,s&&(e=B(e,i,a*4)),c&&(e=e.times(Math.abs(c)<54?R(2,c):he.pow(2,c))),T=!0,e)}function bn(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:pe(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/Oe(5,n)),t=pe(e,2,t,t);for(var i,o=new e(5),s=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(a))));return t}function pe(e,t,n,r,i){var o,s,a,c,u=1,l=e.precision,m=Math.ceil(l/y);for(T=!1,c=n.times(n),a=new e(r);;){if(s=B(a.times(c),new e(t++*t++),l,1),a=i?r.plus(s):r.minus(s),r=B(s.times(c),new e(t++*t++),l,1),s=a.plus(r),s.d[m]!==void 0){for(o=m;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=r,r=s,s=o,u++}return T=!0,s.d.length=m+1,s}function Oe(e,t){for(var n=e;--t;)n*=e;return n}function Dt(e,t){var n,r=t.s<0,i=G(e,e.precision,1),o=i.times(.5);if(t=t.abs(),t.lte(o))return Q=r?4:1,t;if(n=t.divToInt(i),n.isZero())Q=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(o))return Q=kt(n)?r?2:3:r?4:1,t;Q=kt(n)?r?1:4:r?3:2}return t.minus(i).abs()}function $e(e,t,n,r){var i,o,s,a,c,u,l,m,p,g=e.constructor,k=n!==void 0;if(k?(W(n,1,ae),r===void 0?r=g.rounding:W(r,0,8)):(n=g.precision,r=g.rounding),!e.isFinite())l=Et(e);else{for(l=j(e),s=l.indexOf("."),k?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,s>=0&&(l=l.replace(".",""),p=new g(1),p.e=l.length-s,p.d=Ce(j(p),10,i),p.e=p.d.length),m=Ce(l,10,i),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])l=k?"0p+0":"0";else{if(s<0?o--:(e=new g(e),e.d=m,e.e=o,e=B(e,p,n,r,0,i),m=e.d,o=e.e,u=It),s=m[n],a=i/2,u=u||m[n+1]!==void 0,u=r<4?(s!==void 0||u)&&(r===0||r===(e.s<0?3:2)):s>a||s===a&&(r===4||u||r===6&&m[n-1]&1||r===(e.s<0?8:7)),m.length=n,u)for(;++m[--n]>i-1;)m[n]=0,n||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,l="";s<c;s++)l+=je.charAt(m[s]);if(k){if(c>1)if(t==16||t==8){for(s=t==16?4:3,--c;c%s;c++)l+="0";for(m=Ce(l,i,t),c=m.length;!m[c-1];--c);for(s=1,l="1.";s<c;s++)l+=je.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>c)for(o-=c;o--;)l+="0";else o<c&&(l=l.slice(0,o)+"."+l.slice(o))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function At(e,t){if(e.length>t)return e.length=t,!0}function hn(e){return new this(e).abs()}function yn(e){return new this(e).acos()}function wn(e){return new this(e).acosh()}function Tn(e,t){return new this(e).plus(t)}function xn(e){return new this(e).asin()}function Pn(e){return new this(e).asinh()}function kn(e){return new this(e).atan()}function An(e){return new this(e).atanh()}function Sn(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=G(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?G(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=G(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(B(e,t,o,1)),t=G(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(B(e,t,o,1)),n}function In(e){return new this(e).cbrt()}function Bn(e){return b(e=new this(e),e.e+1,2)}function Ln(e,t,n){return new this(e).clamp(t,n)}function Nn(e){if(!e||typeof e!="object")throw Error(De+"Object expected");var t,n,r,i=e.defaults===!0,o=["precision",1,ae,"rounding",0,8,"toExpNeg",-me,0,"toExpPos",0,me,"maxE",0,me,"minE",-me,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=Ze[n]),(r=e[n])!==void 0)if(V(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(se+n+": "+r);if(n="crypto",i&&(this[n]=Ze[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Lt);else this[n]=!1;else throw Error(se+n+": "+r);return this}function _n(e){return new this(e).cos()}function Cn(e){return new this(e).cosh()}function vt(e){var t,n,r;function i(o){var s,a,c,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,St(o)){u.s=o.s,T?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;T?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return Xe(u,o.toString())}else if(c!=="string")throw Error(se+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(a===43&&(o=o.slice(1)),u.s=1),_t.test(o)?Xe(u,o):gn(u,o)}if(i.prototype=f,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Nn,i.clone=vt,i.isDecimal=St,i.abs=hn,i.acos=yn,i.acosh=wn,i.add=Tn,i.asin=xn,i.asinh=Pn,i.atan=kn,i.atanh=An,i.atan2=Sn,i.cbrt=In,i.ceil=Bn,i.clamp=Ln,i.cos=_n,i.cosh=Cn,i.div=Rn,i.exp=Mn,i.floor=En,i.hypot=Dn,i.ln=vn,i.log=On,i.log10=Fn,i.log2=Kn,i.max=Vn,i.min=Wn,i.mod=qn,i.mul=Un,i.pow=Gn,i.random=Hn,i.round=Yn,i.sign=zn,i.sin=jn,i.sinh=Zn,i.sqrt=Qn,i.sub=Jn,i.sum=Xn,i.tan=$n,i.tanh=er,i.trunc=tr,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Rn(e,t){return new this(e).div(t)}function Mn(e){return new this(e).exp()}function En(e){return b(e=new this(e),e.e+1,3)}function Dn(){var e,t,n=new this(0);for(T=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return T=!0,new this(1/0);n=t}return T=!0,n.sqrt()}function St(e){return e instanceof he||e&&e.toStringTag===Nt||!1}function vn(e){return new this(e).ln()}function On(e,t){return new this(e).log(t)}function Kn(e){return new this(e).log(2)}function Fn(e){return new this(e).log(10)}function Vn(){return Mt(this,arguments,"lt")}function Wn(){return Mt(this,arguments,"gt")}function qn(e,t){return new this(e).mod(t)}function Un(e,t){return new this(e).mul(t)}function Gn(e,t){return new this(e).pow(t)}function Hn(e){var t,n,r,i,o=0,s=new this(1),a=[];if(e===void 0?e=this.precision:W(e,1,ae),r=Math.ceil(e/y),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);o<r;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=r/4}else throw Error(Lt);else for(;o<r;)a[o++]=Math.random()*1e7|0;for(r=a[--o],e%=y,r&&e&&(i=R(10,y-e),a[o]=(r/i|0)*i);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=y)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<y&&(n-=y-r)}return s.e=n,s.d=a,s}function Yn(e){return b(e=new this(e),e.e+1,this.rounding)}function zn(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function jn(e){return new this(e).sin()}function Zn(e){return new this(e).sinh()}function Qn(e){return new this(e).sqrt()}function Jn(e,t){return new this(e).sub(t)}function Xn(){var e=0,t=arguments,n=new this(t[e]);for(T=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return T=!0,b(n,this.precision,this.rounding)}function $n(e){return new this(e).tan()}function er(e){return new this(e).tanh()}function tr(e){return b(e=new this(e),e.e+1,1)}f[Symbol.for("nodejs.util.inspect.custom")]=f.toString;f[Symbol.toStringTag]="Decimal";var he=f.constructor=vt(Ze);Re=new he(Re);Me=new he(Me);var fe=he;import{TOKEN_PROGRAM_ID as Wr}from"@solana/spl-token";import{ComputeBudgetProgram as Jr,Keypair as ei,PublicKey as Ft,Transaction as tt,TransactionMessage as ri,VersionedTransaction as ii}from"@solana/web3.js";import{get as Ot,set as nr}from"lodash";var et=class{constructor(t){this.logLevel=t.logLevel!==void 0?t.logLevel:0,this.name=t.name}set level(t){this.logLevel=t}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(t){return t<=this.logLevel}error(...t){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...t),this):this}logWithError(...t){let n=t.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(n)}warning(...t){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...t),this):this}info(...t){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...t),this):this}debug(...t){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...t),this):this}},Kt={},rr={};function E(e){let t=Ot(Kt,e);if(!t){let n=Ot(rr,e);t=new et({name:e,logLevel:n}),nr(Kt,e,t)}return t}import{TOKEN_PROGRAM_ID as ui}from"@solana/spl-token";var J=E("Raydium_txUtil"),ir=1644;function or(e,t){e.length<1&&J.logWithError(`no instructions provided: ${e.toString()}`),t.length<1&&J.logWithError(`no signers provided:, ${t.toString()}`);let n=new tt;n.recentBlockhash="11111111111111111111111111111111",n.feePayer=t[0],n.add(...e);try{return Buffer.from(n.serialize({verifySignatures:!1})).toString("base64").length<ir}catch{return!1}}async function Vt(e,t,n,r=!0){let i=new Ft("RaydiumSimuLateTransaction11111111111111111"),o=[],s=new tt;s.feePayer=i;for(let u of t)or([...s.instructions,u],[i])||(o.push(s),s=new tt,s.feePayer=i),s.add(u);s.instructions.length>0&&o.push(s);let a=[];try{if(a=await sr(e,o,r),a.find(u=>u.err!==null))throw Error("rpc simulateTransaction error")}catch(u){u instanceof Error&&J.logWithError("failed to simulate for instructions","RPC_ERROR",{message:u.message})}let c=[];for(let u of a)if(J.debug("simulate result:",u),u.logs){let l=u.logs.filter(m=>m&&m.includes(n));J.debug("filteredLog:",c),l.length||J.logWithError("simulate log not match keyword","keyword",n),c.push(...l)}return c}function Wt(e,t){let n=e.match(/{["\w:,]+}/g);return!n||n.length!==1?J.logWithError(`simulate log fail to match json, keyword: ${t}`):n[0]}function X(e,t){let r=new RegExp(`"${t}":(\\d+)`,"g").exec(e);return!r||r.length!==2?J.logWithError(`simulate log fail to match key", key: ${t}`):r[1]}function de(e,t){let[n,r]=Ft.findProgramAddressSync(e,t);return{publicKey:n,nonce:r}}async function sr(e,t,n){let r=[];if(n){let i=await e.getLatestBlockhash(),o=[];for(let u of t){u.recentBlockhash=i.blockhash,u.lastValidBlockHeight=i.lastValidBlockHeight;let m=u._compile().serialize(),g=u._serialize(m).toString("base64");o.push(g)}let s=o.map(u=>{let l=e._buildArgs([u],void 0,"base64");return{methodName:"simulateTransaction",args:l}}),a=[],c=20;for(let u=0;u<Math.ceil(s.length/c);u++)a.push(s.slice(u*c,(u+1)*c));r=await(await Promise.all(a.map(async u=>(await e._rpcBatchRequest(u)).map(l=>l.result.value)))).flat()}else try{r=await Promise.all(t.map(async i=>await(await e.simulateTransaction(i)).value))}catch(i){i instanceof Error&&J.logWithError("failed to get info for multiple accounts","RPC_ERROR",{message:i.message})}return r}import{PublicKey as Su}from"@solana/web3.js";import{MintLayout as Bu,TOKEN_PROGRAM_ID as Nu}from"@solana/spl-token";import Pr from"big.js";import ru from"bn.js";import ee from"bn.js";import{PublicKey as ar}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as qt}from"@solana/spl-token";var rt={chainId:101,address:ar.default.toBase58(),programId:qt.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},$={chainId:101,address:"So11111111111111111111111111111111111111112",programId:qt.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as at}from"@solana/web3.js";import{PublicKey as _,SystemProgram as Ut,SYSVAR_RENT_PUBKEY as ur}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as cr}from"@solana/spl-token";function q({pubkey:e,isSigner:t=!1,isWritable:n=!0}){return{pubkey:e,isWritable:n,isSigner:t}}var bi=[q({pubkey:cr,isWritable:!1}),q({pubkey:Ut.programId,isWritable:!1}),q({pubkey:ur,isWritable:!1})];function ot({publicKey:e,transformSol:t}){let n=Gt(e.toString());if(n instanceof _)return t&&n.equals(ye)?it:n;if(t&&n.toString()===ye.toBase58())return it;if(typeof n=="string"){if(n===_.default.toBase58())return _.default;try{return new _(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Gt(e){try{return new _(e)}catch{return e}}var hi=new _("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),yi=new _("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),lr=new _("SysvarRent111111111111111111111111111111111"),wi=new _("SysvarC1ock11111111111111111111111111111111"),Ti=new _("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),xi=new _("Sysvar1nstructions1111111111111111111111111"),Pi=Ut.programId,ki=new _("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ai=new _("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Si=new _("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ii=new _("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Bi=new _("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Li=new _("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ni=new _("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),_i=new _("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Ci=new _("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Ri=new _("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Mi=new _("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),it=new _("So11111111111111111111111111111111111111112"),ye=_.default;function st(e){return ot({publicKey:e,transformSol:!0})}var ut=class{constructor({mint:t,decimals:n,symbol:r,name:i,skipMint:o=!1,isToken2022:s=!1}){if(t===ye.toBase58()||t instanceof at&&ye.equals(t)){this.decimals=$.decimals,this.symbol=$.symbol,this.name=$.name,this.mint=new at($.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=r||t.toString().substring(0,6),this.name=i||t.toString().substring(0,6),this.mint=o?at.default:ot({publicKey:t}),this.isToken2022=s}equals(t){return this===t?!0:this.mint.equals(t.mint)}},ue=ut;ue.WSOL=new ut(re(z({},$),{mint:$.address}));var ct=class{constructor({decimals:t,symbol:n="UNKNOWN",name:r="UNKNOWN"}){this.decimals=t,this.symbol=n,this.name=r}equals(t){return this===t}},Ke=ct;Ke.SOL=new ct(rt);import Ve from"big.js";import dr from"bn.js";import gr from"decimal.js-light";import we from"bn.js";var Ht=9007199254740991;function Y(e){let t=E("Raydium_parseBigNumberish");if(e instanceof we)return e;if(typeof e=="string"){if(e.match(/^-?[0-9]+$/))return new we(e);t.logWithError(`invalid BigNumberish string: ${e}`)}return typeof e=="number"?(e%1&&t.logWithError(`BigNumberish number underflow: ${e}`),(e>=Ht||e<=-Ht)&&t.logWithError(`BigNumberish number overflow: ${e}`),new we(String(e))):typeof e=="bigint"?new we(e.toString()):(t.error(`invalid BigNumberish value: ${e}`),new we(0))}import mr from"toformat";var pr=mr,Te=pr;var Fe=E("module/fraction"),lt=Te(Ve),xe=Te(gr),br={[0]:xe.ROUND_DOWN,[1]:xe.ROUND_HALF_UP,[2]:xe.ROUND_UP},hr={[0]:Ve.roundDown,[1]:Ve.roundHalfUp,[2]:Ve.roundUp},N=class{constructor(t,n=new dr(1)){this.numerator=Y(t),this.denominator=Y(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new N(this.denominator,this.numerator)}add(t){let n=t instanceof N?t:new N(Y(t));return this.denominator.eq(n.denominator)?new N(this.numerator.add(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(t){let n=t instanceof N?t:new N(Y(t));return this.denominator.eq(n.denominator)?new N(this.numerator.sub(n.numerator),this.denominator):new N(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(t){let n=t instanceof N?t:new N(Y(t));return new N(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(t){let n=t instanceof N?t:new N(Y(t));return new N(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(t,n={groupSeparator:""},r=1){Number.isInteger(t)||Fe.logWithError(`${t} is not an integer.`),t<=0&&Fe.logWithError(`${t} is not positive.`),xe.set({precision:t+1,rounding:br[r]});let i=new xe(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return i.toFormat(i.decimalPlaces(),n)}toFixed(t,n={groupSeparator:""},r=1){return Number.isInteger(t)||Fe.logWithError(`${t} is not an integer.`),t<0&&Fe.logWithError(`${t} is negative.`),lt.DP=t,lt.RM=hr[r]||1,new lt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,n)}isZero(){return this.numerator.isZero()}};import yr from"bn.js";var io=new N(new yr(100));var lo=E("Raydium_price");var jt=new ee(0),wr=new ee(1),_o=new ee(2),Co=new ee(3),Ro=new ee(5),Tr=new ee(10),Mo=new ee(100),Eo=new ee(1e3),Do=new ee(1e4);import{PublicKey as qo}from"@solana/web3.js";import{MINT_SIZE as Yo,TOKEN_PROGRAM_ID as zo,getTransferFeeConfig as jo,unpackMint as Zo}from"@solana/spl-token";var Qo=E("Raydium_accountInfo_util");import{PublicKey as rs}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as os}from"@solana/spl-token";import{PublicKey as h}from"@solana/web3.js";var cs=new h("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),ls=new h("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),ms=new h("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),ps=new h("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),fs=new h("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),ds=new h("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),gs=new h("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),bs=new h("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),hs=new h("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),ys=new h("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),ws=new h("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Ts=new h("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),xs=new h("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),pt=new h("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Ps=new h("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),ks=new h("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),As=new h("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Ss=new h("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Is=new h("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Bs=new h("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Ls=new h("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Ns=new h("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),_s=new h("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Cs=new h("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Rs=new h("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Ms=new h("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Es=new h("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Ds=new h("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),vs=new h("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Os=new h("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),Ks=new h("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Fs={OPEN_BOOK_PROGRAM:new h("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new h("Ray1111111111111111111111111111111111111111"),AMM_V4:new h("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new h("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new h("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new h("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new h("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new h("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new h("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new h("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new h("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new h("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:h.default,Router:new h("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new h("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new h("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new h("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new h("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new h("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new h("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new h("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new h("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new h("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new h("Ray1111111111111111111111111111111111111111")};import qs from"bn.js";import{PublicKey as zs,AddressLookupTableAccount as js}from"@solana/web3.js";import{PublicKey as la,sendAndConfirmTransaction as ma,SystemProgram as da,Transaction as ga,TransactionMessage as ha,VersionedTransaction as ya}from"@solana/web3.js";import Ta from"axios";import{PublicKey as Ba}from"@solana/web3.js";import Na from"bn.js";import xr from"bn.js";var Ea=new xr(1e6);var pu=E("Raydium_amount"),fu=Te(Pr);var We=i=>{var o=i,{address:e,programId:t,decimals:n}=o,r=ze(o,["address","programId","decimals"]);return z({chainId:101,address:st(e).toBase58(),programId:t,logoURI:"",symbol:"",name:"",decimals:n,tags:[],extensions:r.extensions||{}},r)};import{PublicKey as ne,SystemProgram as Gc,SYSVAR_RENT_PUBKEY as Hc,TransactionInstruction as Er}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as zc,TOKEN_PROGRAM_ID as jc}from"@solana/spl-token";import{PublicKey as Lr}from"@solana/web3.js";import Jt,{isBN as Xt}from"bn.js";import{bits as vu,BitStructure as Ou,blob as kr,Blob as Ku,cstr as Fu,f32 as Vu,f32be as Wu,f64 as qu,f64be as Uu,greedy as Gu,Layout as Ar,ns64 as Hu,ns64be as Yu,nu64 as zu,nu64be as ju,offset as Zu,s16 as Qu,s16be as Ju,s24 as Xu,s24be as $u,s32 as ec,s32be as tc,s40 as nc,s40be as rc,s48 as ic,s48be as oc,s8 as sc,seq as Sr,struct as ac,Structure as Ir,u16 as uc,u16be as cc,u24 as lc,u24be as mc,u32 as pc,u32be as fc,u40 as dc,u40be as gc,u48 as bc,u48be as hc,u8 as yc,UInt as Br,union as wc,Union as Tc,unionLayoutDiscriminator as xc,utf8 as Pc}from"@solana/buffer-layout";var ft=Ar,Zt=Ir;var dt=Br;var Qt=Sr;var gt=kr;var qe=class extends ft{constructor(n,r,i){super(n,i);this.blob=gt(n),this.signed=r}decode(n,r=0){let i=new Jt(this.blob.decode(n,r),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(n,r,i=0){return typeof n=="number"&&(n=new Jt(n)),this.signed&&(n=n.toTwos(this.span*8)),this.blob.encode(n.toArrayLike(Buffer,"le",this.span),r,i)}};function v(e){return new dt(1,e)}function ce(e){return new dt(4,e)}function d(e){return new qe(8,!1,e)}function te(e){return new qe(16,!1,e)}var bt=class extends ft{constructor(n,r,i,o){super(n.span,o);this.layout=n,this.decoder=r,this.encoder=i}decode(n,r){return this.decoder(this.layout.decode(n,r))}encode(n,r,i){return this.layout.encode(this.encoder(n),r,i)}getSpan(n,r){return this.layout.getSpan(n,r)}};function A(e){return new bt(gt(32),t=>new Lr(t),t=>t.toBuffer(),e)}var ht=class extends Zt{decode(t,n){return super.decode(t,n)}};function M(e,t,n){return new ht(e,t,n)}function Pe(e,t,n){let r,i=typeof t=="number"?t:Xt(t)?t.toNumber():new Proxy(t,{get(o,s){if(!r){let a=Reflect.get(o,"count");r=Xt(a)?a.toNumber():a,Reflect.set(o,"count",r)}return Reflect.get(o,s)},set(o,s,a){return s==="count"&&(r=a),Reflect.set(o,s,a)}});return Qt(e,i,n)}import nl from"bn.js";var Nr=M([v("instruction"),d("amountIn"),d("minAmountOut")]),_r=M([v("instruction"),d("maxAmountIn"),d("amountOut")]),Kc=M([v("instruction"),v("nonce")]),Cr=M([v("instruction"),v("nonce"),d("startTime")]),$t=M([d("status"),d("nonce"),d("maxOrder"),d("depth"),d("baseDecimal"),d("quoteDecimal"),d("state"),d("resetFlag"),d("minSize"),d("volMaxCutRatio"),d("amountWaveRatio"),d("baseLotSize"),d("quoteLotSize"),d("minPriceMultiplier"),d("maxPriceMultiplier"),d("systemDecimalValue"),d("minSeparateNumerator"),d("minSeparateDenominator"),d("tradeFeeNumerator"),d("tradeFeeDenominator"),d("pnlNumerator"),d("pnlDenominator"),d("swapFeeNumerator"),d("swapFeeDenominator"),d("baseNeedTakePnl"),d("quoteNeedTakePnl"),d("quoteTotalPnl"),d("baseTotalPnl"),d("poolOpenTime"),d("punishPcAmount"),d("punishCoinAmount"),d("orderbookToInitTime"),te("swapBaseInAmount"),te("swapQuoteOutAmount"),d("swapBase2QuoteFee"),te("swapQuoteInAmount"),te("swapBaseOutAmount"),d("swapQuote2BaseFee"),A("baseVault"),A("quoteVault"),A("baseMint"),A("quoteMint"),A("lpMint"),A("openOrders"),A("marketId"),A("marketProgramId"),A("targetOrders"),A("withdrawQueue"),A("lpVault"),A("owner"),d("lpReserve"),Pe(d(),3,"padding")]),Fc=M([d("accountType"),d("status"),d("nonce"),d("maxOrder"),d("depth"),d("baseDecimal"),d("quoteDecimal"),d("state"),d("resetFlag"),d("minSize"),d("volMaxCutRatio"),d("amountWaveRatio"),d("baseLotSize"),d("quoteLotSize"),d("minPriceMultiplier"),d("maxPriceMultiplier"),d("systemDecimalsValue"),d("abortTradeFactor"),d("priceTickMultiplier"),d("priceTick"),d("minSeparateNumerator"),d("minSeparateDenominator"),d("tradeFeeNumerator"),d("tradeFeeDenominator"),d("pnlNumerator"),d("pnlDenominator"),d("swapFeeNumerator"),d("swapFeeDenominator"),d("baseNeedTakePnl"),d("quoteNeedTakePnl"),d("quoteTotalPnl"),d("baseTotalPnl"),d("poolOpenTime"),d("punishPcAmount"),d("punishCoinAmount"),d("orderbookToInitTime"),te("swapBaseInAmount"),te("swapQuoteOutAmount"),te("swapQuoteInAmount"),te("swapBaseOutAmount"),d("swapQuote2BaseFee"),d("swapBase2QuoteFee"),A("baseVault"),A("quoteVault"),A("baseMint"),A("quoteMint"),A("lpMint"),A("modelDataAccount"),A("openOrders"),A("marketId"),A("marketProgramId"),A("targetOrders"),A("owner"),Pe(d(),64,"padding")]),Rr=M([v("instruction"),d("baseAmountIn"),d("quoteAmountIn"),d("fixedSide"),d("otherAmountMin")]),Mr=M([v("instruction"),d("lpAmount"),d("baseAmountMin"),d("quoteAmountMin")]);var Vc=M([d("fee")]);var ol=E("Raydium_liquidity_instruction");function en({poolKeys:e}){let t=M([v("instruction"),v("simulateType")]),n=Buffer.alloc(t.span);t.encode({instruction:12,simulateType:0},n);let r=[q({pubkey:new ne(e.id),isWritable:!1}),q({pubkey:new ne(e.authority),isWritable:!1}),q({pubkey:new ne(e.openOrders),isWritable:!1}),q({pubkey:new ne(e.vault.A),isWritable:!1}),q({pubkey:new ne(e.vault.B),isWritable:!1}),q({pubkey:new ne(e.mintLp.address),isWritable:!1}),q({pubkey:new ne(e.marketId),isWritable:!1}),q({pubkey:new ne(e.marketEventQueue),isWritable:!1})];return{instruction:new Er({programId:new ne(e.programId),keys:r,data:n})}}import{PublicKey as Dr}from"@solana/web3.js";import tn from"bn.js";var ul=new tn(25),cl=new tn(1e4);var vr=E("Raydium_liquidity_serum");function nn({programId:e,marketId:t}){let n=[t.toBuffer()],r=0,i;for(;r<100;){try{let o=n.concat(Buffer.from([r]),Buffer.alloc(7));i=Dr.createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;r++;continue}return{publicKey:i,nonce:r}}throw vr.logWithError("unable to find a viable program address nonce","params",{programId:e,marketId:t}),new Error("unable to find a viable program address nonce")}var Or=5e4,Kr=M([d("x"),d("y"),d("price")]),Fr=M([d("accountType"),d("status"),d("multiplier"),d("validDataCount"),Pe(Kr,Or,"DataElement")]);function Vr(e){let t=Fr.decode(e);return{accountType:t.accountType.toNumber(),status:t.status.toNumber(),multiplier:t.multiplier.toNumber(),validDataCount:t.validDataCount.toNumber(),DataElement:t.DataElement.map(n=>({x:n.x.toNumber(),y:n.y.toNumber(),price:n.price.toNumber()}))}}var Ue=class{constructor({connection:t,modelDataPubKey:n=pt}){this._layoutData={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};this.connection=t,this.modelDataPubKey=n}get stableModelData(){return this._layoutData}async initStableModelLayout(){if(this._layoutData.validDataCount===0&&this.connection){let t=await this.connection.getAccountInfo(this.modelDataPubKey);t&&(this._layoutData=Vr(t==null?void 0:t.data))}}};var ke=M([A("mint"),A("owner"),d("amount"),ce("delegateOption"),A("delegate"),v("state"),ce("isNativeOption"),d("isNative"),d("delegatedAmount"),ce("closeAuthorityOption"),A("closeAuthority")]);import{Keypair as Sl,PublicKey as Il}from"@solana/web3.js";import Nl from"bn.js";import{TOKEN_PROGRAM_ID as Rl}from"@solana/spl-token";var El=E("Raydium_Util");import{PublicKey as Vl,SystemProgram as ql}from"@solana/web3.js";import Hl from"bn.js";import{createCloseAccountInstruction as Zl,createInitializeAccountInstruction as Ql,createTransferInstruction as Jl,TOKEN_PROGRAM_ID as Xl}from"@solana/spl-token";var rn=M([ce("mintAuthorityOption"),A("mintAuthority"),d("supply"),v("decimals"),v("isInitialized"),ce("freezeAuthorityOption"),A("freezeAuthority")]);function on({programId:e}){let{publicKey:t}=de([Buffer.from("amm_config_account_seed","utf-8")],e);return t}function le({name:e,programId:t,marketId:n}){let{publicKey:r}=de([t.toBuffer(),n.toBuffer(),Buffer.from(e,"utf-8")],t);return r}function qr({programId:e,marketId:t}){let{publicKey:n}=de([e.toBuffer(),t.toBuffer(),Buffer.from("open_order_associated_seed","utf-8")],e);return n}function Ur({programId:e}){return de([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],e)}function Nm({version:e,marketVersion:t,marketId:n,baseMint:r,quoteMint:i,baseDecimals:o,quoteDecimals:s,programId:a,marketProgramId:c}){let u=le({name:"amm_associated_seed",programId:a,marketId:n}),l=le({name:"lp_mint_associated_seed",programId:a,marketId:n}),{publicKey:m,nonce:p}=Ur({programId:a}),g=le({name:"coin_vault_associated_seed",programId:a,marketId:n}),k=le({name:"pc_vault_associated_seed",programId:a,marketId:n}),w=le({name:"temp_lp_token_associated_seed",programId:a,marketId:n}),C=qr({programId:a,marketId:n}),I=le({name:"target_associated_seed",programId:a,marketId:n}),O=le({name:"withdraw_associated_seed",programId:a,marketId:n}),{publicKey:S}=nn({programId:c,marketId:n});return{id:u,baseMint:r,quoteMint:i,lpMint:l,baseDecimals:o,quoteDecimals:s,lpDecimals:o,version:e,programId:a,authority:m,nonce:p,baseVault:g,quoteVault:k,lpVault:w,openOrders:C,targetOrders:I,withdrawQueue:O,marketVersion:t,marketProgramId:c,marketId:n,marketAuthority:S,lookupTableAccount:Se.default,configId:on({programId:a})}}var yt;async function _m({connection:e,poolKeysList:t,config:n,modelDataPubKey:r}){return t.find(o=>o.modelDataAccount)&&(yt||(yt=new Ue({connection:e,modelDataPubKey:r}),await yt.initStableModelLayout())),await Promise.all(t.map(async o=>{if(o.modelDataAccount){let s=en({poolKeys:o});return(await Vt(e,[s.instruction],"GetPoolData")).map(u=>{let l=Wt(u,"GetPoolData"),m=new Ae(X(l,"status")),p=Number(X(l,"coin_decimals")),g=Number(X(l,"pc_decimals")),k=Number(X(l,"lp_decimals")),w=new Ae(X(l,"pool_coin_amount")),C=new Ae(X(l,"pool_pc_amount")),I=new Ae(X(l,"pool_lp_supply")),O="0";try{O=X(l,"pool_open_time")}catch{}return{status:m,baseDecimals:p,quoteDecimals:g,lpDecimals:k,baseReserve:w,quoteReserve:C,lpSupply:I,startTime:new Ae(O)}})[0]}else{let[s,a,c,u]=await e.getMultipleAccountsInfo([new Se(o.id),new Se(o.vault.A),new Se(o.vault.B),new Se(o.mintLp.address)]);if(s===null)throw Error("fetch pool error");if(a===null)throw Error("fetch vaultAccA error");if(c===null)throw Error("fetch vaultAccB error");if(u===null)throw Error("fetch mintAccLp error");let l=$t.decode(s.data),m=ke.decode(a.data),p=ke.decode(c.data),g=rn.decode(u.data);return{status:l.status,baseDecimals:l.baseDecimal.toNumber(),quoteDecimals:l.quoteDecimal.toNumber(),lpDecimals:g.decimals,baseReserve:m.amount.sub(l.baseNeedTakePnl),quoteReserve:p.amount.sub(l.quoteNeedTakePnl),lpSupply:l.lpReserve,startTime:l.poolOpenTime}}}))}var wt={volume:0,volumeQuote:0,volumeFee:0,apr:0,feeApr:0,priceMin:0,priceMax:0,rewardApr:[]},Cm=e=>{let t={},n=Wr.toBase58();return Object.keys(e).map(r=>{let i=e[r],[o,s]=[i.baseMint.toBase58(),i.quoteMint.toBase58()];t[r]={id:r,version:4,status:i.status.toNumber(),programId:i.programId.toBase58(),mintA:We({address:o,programId:n,decimals:i.baseDecimal.toNumber()}),mintB:We({address:s,programId:n,decimals:i.quoteDecimal.toNumber()}),rewardDefaultInfos:[],rewardDefaultPoolInfos:"Ecosystem",price:i.poolPrice.toNumber(),mintAmountA:new fe(i.mintAAmount.toString()).div(10**i.baseDecimal.toNumber()).toNumber(),mintAmountB:new fe(i.mintBAmount.toString()).div(10**i.quoteDecimal.toNumber()).toNumber(),baseReserve:i.baseReserve,quoteReserve:i.quoteReserve,feeRate:new fe(i.tradeFeeNumerator.toString()).div(i.tradeFeeDenominator.toString()).toNumber(),openTime:i.poolOpenTime.toString(),tvl:0,day:wt,week:wt,month:wt,pooltype:[],farmUpcomingCount:0,farmOngoingCount:0,farmFinishedCount:0,type:"Standard",marketId:i.marketId.toBase58(),configId:on({programId:i.programId}).toBase58(),lpPrice:0,lpAmount:new fe(i.lpReserve.toString()).div(10**Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())).toNumber(),lpMint:We({address:i.lpMint.toBase58(),programId:n,decimals:Math.min(i.baseDecimal.toNumber(),i.quoteDecimal.toNumber())}),burnPercent:0}}),t};export{_m as fetchMultipleInfo,on as getAssociatedConfigId,qr as getAssociatedOpenOrders,Nm as getAssociatedPoolKeys,Ur as getLiquidityAssociatedAuthority,le as getLiquidityAssociatedId,Cm as toAmmComputePoolInfo};
//# sourceMappingURL=utils.mjs.map